---
alwaysApply: false
---

# Context Optimization Rules

Guidelines for minimizing context usage while maximizing effectiveness.

## CLAUDE.md Structure

Keep CLAUDE.md files minimal (5-10 lines ideal, 50 max):

```markdown
# [Module] - AI Guidelines

[One-line description]. See @[full/path/to/README.md] for documentation.

**Agent**: Use `[agent-name]` for this module.

[Only critical AI-specific notes if needed]
```

## @-Mention Best Practices

### Always Use Full Paths

- ✅ `@kit/dapp/src/orpc/README.md`
- ❌ `./README.md` or `../docs/`

### Use Wildcards for Multiple Files

- ✅ `@.claude/agents/*.md`
- ✅ `@kit/*/package.json`
- ❌ Listing each file individually

### Reference Don't Duplicate

- ✅ "See @.cursor/rules/mcp-usage.mdc for patterns"
- ❌ Copying MCP examples into every agent file

## Content Hierarchy

1. **Root CLAUDE.md**: Project-wide critical rules only
2. **Module CLAUDE.md**: 5-10 lines with @-mentions
3. **Agent Files**: Domain-specific instructions
4. **Cursor Rules**: Reusable patterns and workflows
5. **README.md**: Comprehensive technical documentation

## What Goes Where

### Root CLAUDE.md

- Critical rules (never commit to main, etc.)
- Project structure with agent mappings
- Essential commands
- Links to detailed docs via @-mentions

### Module CLAUDE.md

- One-line purpose
- README reference with @-mention
- Agent assignment
- Critical warnings only

### Agent Files

- Role-specific instructions
- Domain expertise
- @-mentions to cursor rules
- Unique workflows for that agent

### Cursor Rules

- MCP usage patterns
- Learning protocols
- Common workflows
- Reusable guidelines

## Optimization Techniques

1. **Extract Common Patterns**: Move to cursor rules
2. **Use References**: @-mention instead of copying
3. **Consolidate Examples**: One location, many references
4. **Remove Redundancy**: If it's in README, don't repeat
5. **Be Concise**: Every word should add value

## Anti-Patterns to Avoid

1. **Duplication**: Same info in multiple places
2. **Verbose Examples**: Keep examples in cursor rules
3. **Relative Links**: Always use full @-mention paths
4. **Unnecessary Sections**: If not critical, remove it
5. **Long Explanations**: Link to detailed docs instead

## Measuring Success

Good optimization when:

- CLAUDE.md files under 50 lines
- No duplicate information
- Clear @-mention references
- Fast context loading
- Easy to maintain
