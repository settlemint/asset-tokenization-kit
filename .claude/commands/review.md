Please review this pull request and provide comprehensive feedback.

Focus on:

- Code quality and best practices (use context7 for the latest documentation)
- Consistency with with rest of the codebase
- Verify any rules defined in the .cursor/rules folder or the CLAUDE.md file are
  adhered to
- Potential bugs or issues
- Performance considerations
- Security implications
- Test coverage
- Documentation updates if needed
- Compare the new code with the main branch and check if we didn't break
  anything.

Provide constructive feedback with specific suggestions for improvement. Be
brutally honest, don't be a yes man. If I am wrong, point it out bluntly. I need
honest feedback on my code.

Ask me which items I want implemented, then do so step by step with a subagent
per item.
