# --------------------------------------------------
# SMART Indexer
# --------------------------------------------------

type Address @entity(immutable: true) {
  id: Bytes!
  isContract: Boolean!
}

type Event @entity(immutable: true) {
  id: Bytes!
  # Identifying the event
  eventName: String!
  # Default event fields
  txIndex: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  # List of accounts involved in the event
  emitter: Address!
  sender: Address!
  involved: [Address!]!
  # List of values involved in the event
  values: [EventValue!]! @derivedFrom(field: "entry")
}

type EventValue @entity(immutable: true) {
  id: Bytes!
  name: String!
  value: String!
  entry: Event!
}

type Internal_AccessControl @entity(immutable: false) {
  id: Bytes!
  admins: [Address!]!
  supplyManagers: [Address!]!
  userManagers: [Address!]!
  signers: [Address!]!
  deploymentOwners: [Address!]!
}

type System_DeploymentRegistry @entity(immutable: false) {
  id: Bytes!
  asAccessControl: Internal_AccessControl!
  asAddress: Address!
  compliance: System_Compliance
  identityRegistryStorage: System_IdentityRegistryStorage
  identityFactory: System_IdentityFactory
  identityRegistry: System_IdentityRegistry
  trustedIssuersRegistry: System_TrustedIssuersRegistry
  tokenRegistries: [System_TokenRegistry!]!
    @derivedFrom(field: "deploymentRegistry")
}

type System_Compliance @entity(immutable: false) {
  id: Bytes!
  asAddress: Address
}

type System_IdentityRegistryStorage @entity(immutable: false) {
  id: Bytes!
  asAddress: Address
}

type System_IdentityFactory @entity(immutable: false) {
  id: Bytes!
  asAddress: Address
}

type System_IdentityRegistry @entity(immutable: false) {
  id: Bytes!
  asAddress: Address
}

type System_TrustedIssuersRegistry @entity(immutable: false) {
  id: Bytes!
  asAddress: Address
}

type System_TokenRegistry @entity(immutable: false) {
  id: Bytes!
  typeName: String!
  deploymentRegistry: System_DeploymentRegistry!
  asAddress: Address
}
