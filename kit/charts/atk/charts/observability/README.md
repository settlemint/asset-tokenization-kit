# observability

![Version: 2.0.0-alpha.17](https://img.shields.io/badge/Version-2.0.0--alpha.17-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 2.0.0-alpha.17](https://img.shields.io/badge/AppVersion-2.0.0--alpha.17-informational?style=flat-square)

A Helm chart for the observability components

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| SettleMint | <support@settlemint.com> | <https://settlemint.com> |

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://grafana.github.io/helm-charts | alloy | 1.3.0 |
| https://grafana.github.io/helm-charts | grafana | 10.0.0 |
| https://grafana.github.io/helm-charts | loki | 6.42.0 |
| https://grafana.github.io/helm-charts | tempo | 1.23.3 |
| https://kubernetes-sigs.github.io/metrics-server/ | metrics-server | 3.13.0 |
| https://prometheus-community.github.io/helm-charts | kube-state-metrics | 6.3.0 |
| https://prometheus-community.github.io/helm-charts | prometheus-node-exporter | 4.48.0 |
| https://victoriametrics.github.io/helm-charts/ | victoria-metrics-single | 0.24.6 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| alloy | object | `{"alloy":{"configMap":{"content":"logging {\n  level  = \"info\"\n  format = \"logfmt\"\n}\n\ndiscovery.kubernetes \"kubernetes_nodes\" {\n  role = \"node\"\n}\n\ndiscovery.relabel \"kubernetes_nodes_cadvisor\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics/cadvisor\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n}\n\ndiscovery.relabel \"kubernetes_nodes\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n}\n\n\nprometheus.scrape \"kubernetes_nodes_cadvisor\" {\n  targets         = discovery.relabel.kubernetes_nodes_cadvisor.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes-cadvisor\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\nprometheus.scrape \"kubernetes_nodes\" {\n  targets         = discovery.relabel.kubernetes_nodes.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\n{{- if .Values.endpoints.internal.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics\" {\n    endpoint {\n        url = {{ .Values.endpoints.internal.prometheus.url | quote }}\n    }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics_external\" {\n    endpoint {\n        url = {{ .Values.endpoints.external.prometheus.url | quote }}\n\n        {{- if and .Values.endpoints.external.prometheus.basicAuth.username .Values.endpoints.external.prometheus.basicAuth.password }}\n        basic_auth {\n          username = {{ .Values.endpoints.external.prometheus.basicAuth.username | quote }}\n          password = {{ .Values.endpoints.external.prometheus.basicAuth.password | quote }}\n        }\n        {{- end }}\n    }\n}\n{{- end }}\n\ndiscovery.kubernetes \"kubernetes_pods\" {\n  role = \"pod\"\n\n\n  selectors {\n    role  = \"pod\"\n    label = \"app.kubernetes.io/instance={{ .Release.Name }}\"\n  }\n\n}\n\ndiscovery.relabel \"kubernetes_pods\" {\n  targets = discovery.kubernetes.kubernetes_pods.targets\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_scheme\"]\n    regex         = \"(https?)\"\n    target_label  = \"__scheme__\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_path\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n  }\n\n  rule {\n    source_labels = [\"__address__\", \"__meta_kubernetes_pod_annotation_prometheus_io_port\"]\n    regex         = \"(.+?)(?::\\\\d+)?;(\\\\d+)\"\n    target_label  = \"__address__\"\n    replacement   = \"$1:$2\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    replacement = \"__param_$1\"\n    action      = \"labelmap\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_label_app_kubernetes_io_component\"]\n    target_label  = \"component\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_namespace\"]\n    target_label  = \"namespace\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n\n}\n\nprometheus.scrape \"kubernetes_pods\" {\n  targets         = discovery.relabel.kubernetes_pods.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-pods\"\n  honor_labels    = true\n  scrape_interval = \"15s\"\n}\n\nloki.source.kubernetes \"kubernetes_pods\" {\n  targets    = discovery.relabel.kubernetes_pods.output\n  forward_to = [{{ if .Values.endpoints.internal.loki.enabled }}loki.process.redact_tokens.receiver{{ end }}{{ if .Values.endpoints.external.loki.enabled }}{{ if .Values.endpoints.internal.loki.enabled }},{{ end }}loki.process.redact_tokens_external.receiver{{ end }}]\n}\n\n{{- if .Values.endpoints.internal.loki.enabled }}\nloki.process \"redact_tokens\" {\n  forward_to = [loki.secretfilter.secret_filter.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter\" {\n  forward_to  = [loki.write.btp_logs.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs\" {\n  endpoint {\n    url = {{ .Values.endpoints.internal.loki.url | quote }}\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.loki.enabled }}\nloki.process \"redact_tokens_external\" {\n  forward_to = [loki.secretfilter.secret_filter_external.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter_external\" {\n  forward_to  = [loki.write.btp_logs_external.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs_external\" {\n  endpoint {\n    url = {{ .Values.endpoints.external.loki.url | quote }}\n\n    {{- if and .Values.endpoints.external.loki.basicAuth.username .Values.endpoints.external.loki.basicAuth.password }}\n    basic_auth {\n      username = {{ .Values.endpoints.external.loki.basicAuth.username | quote }}\n      password = {{ .Values.endpoints.external.loki.basicAuth.password | quote }}\n    }\n    {{- end }}\n  }\n}\n{{- end }}\n\notelcol.receiver.otlp \"atk_traces\" {\n  grpc {\n    endpoint = \"0.0.0.0:4317\"\n  }\n\n  http {\n    endpoint = \"0.0.0.0:4318\"\n  }\n\n  output {\n    traces  = [otelcol.processor.batch.atk_traces.input]\n  }\n}\n\notelcol.processor.batch \"atk_traces\" {\n  send_batch_size = 16384\n  send_batch_max_size = 16384\n  timeout = \"2s\"\n\n  output {\n    traces  = [{{ if .Values.endpoints.internal.otel.enabled }}otelcol.exporter.otlphttp.atk_traces_internal.input{{ end }}{{ if .Values.endpoints.external.otel.enabled }}{{ if .Values.endpoints.internal.otel.enabled }},{{ end }}otelcol.exporter.otlphttp.atk_traces_external.input{{ end }}]\n  }\n}\n\n{{- if .Values.endpoints.internal.otel.enabled }}\notelcol.exporter.otlphttp \"atk_traces_internal\" {\n  client {\n    endpoint = {{ .Values.endpoints.internal.otel.url | quote }}\n    tls {\n      insecure             = true\n      insecure_skip_verify = true\n    }\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.otel.enabled }}\notelcol.exporter.otlp \"atk_traces_external\" {\n  client {\n    endpoint = {{ .Values.endpoints.external.otel.url | quote }}\n\n\n    {{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\n    auth     = otelcol.auth.basic.atk_traces_external.handler\n    {{- end }}\n  }\n}\n\n{{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\notelcol.auth.basic \"atk_traces_external\" {\n  username = {{ .Values.endpoints.external.otel.basicAuth.username | quote }}\n  password = {{ .Values.endpoints.external.otel.basicAuth.password | quote }}\n}\n{{- end }}\n\n{{- end }}\n"},"enableReporting":false,"extraPorts":[{"name":"otel-grpc","port":4317,"protocol":"TCP","targetPort":4317},{"name":"otel-http","port":4318,"protocol":"TCP","targetPort":4318}],"resources":{},"stabilityLevel":"experimental"},"clustername":"","configReloader":{"image":{"registry":"ghcr.io"}},"controller":{"type":"deployment"},"crds":{"create":false},"enabled":true,"endpoints":{"external":{"loki":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"otel":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"prometheus":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}},"internal":{"loki":{"enabled":true,"url":"http://logs:3100/loki/api/v1/push"},"otel":{"enabled":true,"url":"http://tempo:4318"},"prometheus":{"enabled":true,"url":"http://metrics:8428/api/v1/write"}}},"fullnameOverride":"alloy","global":{"image":{"pullSecrets":[]}},"image":{"registry":"docker.io"}}` | Alloy configuration |
| alloy.alloy | object | `{"configMap":{"content":"logging {\n  level  = \"info\"\n  format = \"logfmt\"\n}\n\ndiscovery.kubernetes \"kubernetes_nodes\" {\n  role = \"node\"\n}\n\ndiscovery.relabel \"kubernetes_nodes_cadvisor\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics/cadvisor\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n}\n\ndiscovery.relabel \"kubernetes_nodes\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n}\n\n\nprometheus.scrape \"kubernetes_nodes_cadvisor\" {\n  targets         = discovery.relabel.kubernetes_nodes_cadvisor.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes-cadvisor\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\nprometheus.scrape \"kubernetes_nodes\" {\n  targets         = discovery.relabel.kubernetes_nodes.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\n{{- if .Values.endpoints.internal.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics\" {\n    endpoint {\n        url = {{ .Values.endpoints.internal.prometheus.url | quote }}\n    }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics_external\" {\n    endpoint {\n        url = {{ .Values.endpoints.external.prometheus.url | quote }}\n\n        {{- if and .Values.endpoints.external.prometheus.basicAuth.username .Values.endpoints.external.prometheus.basicAuth.password }}\n        basic_auth {\n          username = {{ .Values.endpoints.external.prometheus.basicAuth.username | quote }}\n          password = {{ .Values.endpoints.external.prometheus.basicAuth.password | quote }}\n        }\n        {{- end }}\n    }\n}\n{{- end }}\n\ndiscovery.kubernetes \"kubernetes_pods\" {\n  role = \"pod\"\n\n\n  selectors {\n    role  = \"pod\"\n    label = \"app.kubernetes.io/instance={{ .Release.Name }}\"\n  }\n\n}\n\ndiscovery.relabel \"kubernetes_pods\" {\n  targets = discovery.kubernetes.kubernetes_pods.targets\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_scheme\"]\n    regex         = \"(https?)\"\n    target_label  = \"__scheme__\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_path\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n  }\n\n  rule {\n    source_labels = [\"__address__\", \"__meta_kubernetes_pod_annotation_prometheus_io_port\"]\n    regex         = \"(.+?)(?::\\\\d+)?;(\\\\d+)\"\n    target_label  = \"__address__\"\n    replacement   = \"$1:$2\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    replacement = \"__param_$1\"\n    action      = \"labelmap\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_label_app_kubernetes_io_component\"]\n    target_label  = \"component\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_namespace\"]\n    target_label  = \"namespace\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n\n}\n\nprometheus.scrape \"kubernetes_pods\" {\n  targets         = discovery.relabel.kubernetes_pods.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-pods\"\n  honor_labels    = true\n  scrape_interval = \"15s\"\n}\n\nloki.source.kubernetes \"kubernetes_pods\" {\n  targets    = discovery.relabel.kubernetes_pods.output\n  forward_to = [{{ if .Values.endpoints.internal.loki.enabled }}loki.process.redact_tokens.receiver{{ end }}{{ if .Values.endpoints.external.loki.enabled }}{{ if .Values.endpoints.internal.loki.enabled }},{{ end }}loki.process.redact_tokens_external.receiver{{ end }}]\n}\n\n{{- if .Values.endpoints.internal.loki.enabled }}\nloki.process \"redact_tokens\" {\n  forward_to = [loki.secretfilter.secret_filter.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter\" {\n  forward_to  = [loki.write.btp_logs.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs\" {\n  endpoint {\n    url = {{ .Values.endpoints.internal.loki.url | quote }}\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.loki.enabled }}\nloki.process \"redact_tokens_external\" {\n  forward_to = [loki.secretfilter.secret_filter_external.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter_external\" {\n  forward_to  = [loki.write.btp_logs_external.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs_external\" {\n  endpoint {\n    url = {{ .Values.endpoints.external.loki.url | quote }}\n\n    {{- if and .Values.endpoints.external.loki.basicAuth.username .Values.endpoints.external.loki.basicAuth.password }}\n    basic_auth {\n      username = {{ .Values.endpoints.external.loki.basicAuth.username | quote }}\n      password = {{ .Values.endpoints.external.loki.basicAuth.password | quote }}\n    }\n    {{- end }}\n  }\n}\n{{- end }}\n\notelcol.receiver.otlp \"atk_traces\" {\n  grpc {\n    endpoint = \"0.0.0.0:4317\"\n  }\n\n  http {\n    endpoint = \"0.0.0.0:4318\"\n  }\n\n  output {\n    traces  = [otelcol.processor.batch.atk_traces.input]\n  }\n}\n\notelcol.processor.batch \"atk_traces\" {\n  send_batch_size = 16384\n  send_batch_max_size = 16384\n  timeout = \"2s\"\n\n  output {\n    traces  = [{{ if .Values.endpoints.internal.otel.enabled }}otelcol.exporter.otlphttp.atk_traces_internal.input{{ end }}{{ if .Values.endpoints.external.otel.enabled }}{{ if .Values.endpoints.internal.otel.enabled }},{{ end }}otelcol.exporter.otlphttp.atk_traces_external.input{{ end }}]\n  }\n}\n\n{{- if .Values.endpoints.internal.otel.enabled }}\notelcol.exporter.otlphttp \"atk_traces_internal\" {\n  client {\n    endpoint = {{ .Values.endpoints.internal.otel.url | quote }}\n    tls {\n      insecure             = true\n      insecure_skip_verify = true\n    }\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.otel.enabled }}\notelcol.exporter.otlp \"atk_traces_external\" {\n  client {\n    endpoint = {{ .Values.endpoints.external.otel.url | quote }}\n\n\n    {{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\n    auth     = otelcol.auth.basic.atk_traces_external.handler\n    {{- end }}\n  }\n}\n\n{{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\notelcol.auth.basic \"atk_traces_external\" {\n  username = {{ .Values.endpoints.external.otel.basicAuth.username | quote }}\n  password = {{ .Values.endpoints.external.otel.basicAuth.password | quote }}\n}\n{{- end }}\n\n{{- end }}\n"},"enableReporting":false,"extraPorts":[{"name":"otel-grpc","port":4317,"protocol":"TCP","targetPort":4317},{"name":"otel-http","port":4318,"protocol":"TCP","targetPort":4318}],"resources":{},"stabilityLevel":"experimental"}` | Alloy agent configuration |
| alloy.alloy.configMap | object | `{"content":"logging {\n  level  = \"info\"\n  format = \"logfmt\"\n}\n\ndiscovery.kubernetes \"kubernetes_nodes\" {\n  role = \"node\"\n}\n\ndiscovery.relabel \"kubernetes_nodes_cadvisor\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics/cadvisor\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n}\n\ndiscovery.relabel \"kubernetes_nodes\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n}\n\n\nprometheus.scrape \"kubernetes_nodes_cadvisor\" {\n  targets         = discovery.relabel.kubernetes_nodes_cadvisor.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes-cadvisor\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\nprometheus.scrape \"kubernetes_nodes\" {\n  targets         = discovery.relabel.kubernetes_nodes.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\n{{- if .Values.endpoints.internal.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics\" {\n    endpoint {\n        url = {{ .Values.endpoints.internal.prometheus.url | quote }}\n    }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics_external\" {\n    endpoint {\n        url = {{ .Values.endpoints.external.prometheus.url | quote }}\n\n        {{- if and .Values.endpoints.external.prometheus.basicAuth.username .Values.endpoints.external.prometheus.basicAuth.password }}\n        basic_auth {\n          username = {{ .Values.endpoints.external.prometheus.basicAuth.username | quote }}\n          password = {{ .Values.endpoints.external.prometheus.basicAuth.password | quote }}\n        }\n        {{- end }}\n    }\n}\n{{- end }}\n\ndiscovery.kubernetes \"kubernetes_pods\" {\n  role = \"pod\"\n\n\n  selectors {\n    role  = \"pod\"\n    label = \"app.kubernetes.io/instance={{ .Release.Name }}\"\n  }\n\n}\n\ndiscovery.relabel \"kubernetes_pods\" {\n  targets = discovery.kubernetes.kubernetes_pods.targets\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_scheme\"]\n    regex         = \"(https?)\"\n    target_label  = \"__scheme__\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_path\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n  }\n\n  rule {\n    source_labels = [\"__address__\", \"__meta_kubernetes_pod_annotation_prometheus_io_port\"]\n    regex         = \"(.+?)(?::\\\\d+)?;(\\\\d+)\"\n    target_label  = \"__address__\"\n    replacement   = \"$1:$2\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    replacement = \"__param_$1\"\n    action      = \"labelmap\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_label_app_kubernetes_io_component\"]\n    target_label  = \"component\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_namespace\"]\n    target_label  = \"namespace\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n\n}\n\nprometheus.scrape \"kubernetes_pods\" {\n  targets         = discovery.relabel.kubernetes_pods.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-pods\"\n  honor_labels    = true\n  scrape_interval = \"15s\"\n}\n\nloki.source.kubernetes \"kubernetes_pods\" {\n  targets    = discovery.relabel.kubernetes_pods.output\n  forward_to = [{{ if .Values.endpoints.internal.loki.enabled }}loki.process.redact_tokens.receiver{{ end }}{{ if .Values.endpoints.external.loki.enabled }}{{ if .Values.endpoints.internal.loki.enabled }},{{ end }}loki.process.redact_tokens_external.receiver{{ end }}]\n}\n\n{{- if .Values.endpoints.internal.loki.enabled }}\nloki.process \"redact_tokens\" {\n  forward_to = [loki.secretfilter.secret_filter.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter\" {\n  forward_to  = [loki.write.btp_logs.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs\" {\n  endpoint {\n    url = {{ .Values.endpoints.internal.loki.url | quote }}\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.loki.enabled }}\nloki.process \"redact_tokens_external\" {\n  forward_to = [loki.secretfilter.secret_filter_external.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter_external\" {\n  forward_to  = [loki.write.btp_logs_external.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs_external\" {\n  endpoint {\n    url = {{ .Values.endpoints.external.loki.url | quote }}\n\n    {{- if and .Values.endpoints.external.loki.basicAuth.username .Values.endpoints.external.loki.basicAuth.password }}\n    basic_auth {\n      username = {{ .Values.endpoints.external.loki.basicAuth.username | quote }}\n      password = {{ .Values.endpoints.external.loki.basicAuth.password | quote }}\n    }\n    {{- end }}\n  }\n}\n{{- end }}\n\notelcol.receiver.otlp \"atk_traces\" {\n  grpc {\n    endpoint = \"0.0.0.0:4317\"\n  }\n\n  http {\n    endpoint = \"0.0.0.0:4318\"\n  }\n\n  output {\n    traces  = [otelcol.processor.batch.atk_traces.input]\n  }\n}\n\notelcol.processor.batch \"atk_traces\" {\n  send_batch_size = 16384\n  send_batch_max_size = 16384\n  timeout = \"2s\"\n\n  output {\n    traces  = [{{ if .Values.endpoints.internal.otel.enabled }}otelcol.exporter.otlphttp.atk_traces_internal.input{{ end }}{{ if .Values.endpoints.external.otel.enabled }}{{ if .Values.endpoints.internal.otel.enabled }},{{ end }}otelcol.exporter.otlphttp.atk_traces_external.input{{ end }}]\n  }\n}\n\n{{- if .Values.endpoints.internal.otel.enabled }}\notelcol.exporter.otlphttp \"atk_traces_internal\" {\n  client {\n    endpoint = {{ .Values.endpoints.internal.otel.url | quote }}\n    tls {\n      insecure             = true\n      insecure_skip_verify = true\n    }\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.otel.enabled }}\notelcol.exporter.otlp \"atk_traces_external\" {\n  client {\n    endpoint = {{ .Values.endpoints.external.otel.url | quote }}\n\n\n    {{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\n    auth     = otelcol.auth.basic.atk_traces_external.handler\n    {{- end }}\n  }\n}\n\n{{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\notelcol.auth.basic \"atk_traces_external\" {\n  username = {{ .Values.endpoints.external.otel.basicAuth.username | quote }}\n  password = {{ .Values.endpoints.external.otel.basicAuth.password | quote }}\n}\n{{- end }}\n\n{{- end }}\n"}` | ConfigMap configuration for Alloy |
| alloy.alloy.configMap.content | string | `"logging {\n  level  = \"info\"\n  format = \"logfmt\"\n}\n\ndiscovery.kubernetes \"kubernetes_nodes\" {\n  role = \"node\"\n}\n\ndiscovery.relabel \"kubernetes_nodes_cadvisor\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics/cadvisor\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n}\n\ndiscovery.relabel \"kubernetes_nodes\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n}\n\n\nprometheus.scrape \"kubernetes_nodes_cadvisor\" {\n  targets         = discovery.relabel.kubernetes_nodes_cadvisor.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes-cadvisor\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\nprometheus.scrape \"kubernetes_nodes\" {\n  targets         = discovery.relabel.kubernetes_nodes.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\n{{- if .Values.endpoints.internal.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics\" {\n    endpoint {\n        url = {{ .Values.endpoints.internal.prometheus.url | quote }}\n    }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics_external\" {\n    endpoint {\n        url = {{ .Values.endpoints.external.prometheus.url | quote }}\n\n        {{- if and .Values.endpoints.external.prometheus.basicAuth.username .Values.endpoints.external.prometheus.basicAuth.password }}\n        basic_auth {\n          username = {{ .Values.endpoints.external.prometheus.basicAuth.username | quote }}\n          password = {{ .Values.endpoints.external.prometheus.basicAuth.password | quote }}\n        }\n        {{- end }}\n    }\n}\n{{- end }}\n\ndiscovery.kubernetes \"kubernetes_pods\" {\n  role = \"pod\"\n\n\n  selectors {\n    role  = \"pod\"\n    label = \"app.kubernetes.io/instance={{ .Release.Name }}\"\n  }\n\n}\n\ndiscovery.relabel \"kubernetes_pods\" {\n  targets = discovery.kubernetes.kubernetes_pods.targets\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_scheme\"]\n    regex         = \"(https?)\"\n    target_label  = \"__scheme__\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_path\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n  }\n\n  rule {\n    source_labels = [\"__address__\", \"__meta_kubernetes_pod_annotation_prometheus_io_port\"]\n    regex         = \"(.+?)(?::\\\\d+)?;(\\\\d+)\"\n    target_label  = \"__address__\"\n    replacement   = \"$1:$2\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    replacement = \"__param_$1\"\n    action      = \"labelmap\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_label_app_kubernetes_io_component\"]\n    target_label  = \"component\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_namespace\"]\n    target_label  = \"namespace\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n\n}\n\nprometheus.scrape \"kubernetes_pods\" {\n  targets         = discovery.relabel.kubernetes_pods.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-pods\"\n  honor_labels    = true\n  scrape_interval = \"15s\"\n}\n\nloki.source.kubernetes \"kubernetes_pods\" {\n  targets    = discovery.relabel.kubernetes_pods.output\n  forward_to = [{{ if .Values.endpoints.internal.loki.enabled }}loki.process.redact_tokens.receiver{{ end }}{{ if .Values.endpoints.external.loki.enabled }}{{ if .Values.endpoints.internal.loki.enabled }},{{ end }}loki.process.redact_tokens_external.receiver{{ end }}]\n}\n\n{{- if .Values.endpoints.internal.loki.enabled }}\nloki.process \"redact_tokens\" {\n  forward_to = [loki.secretfilter.secret_filter.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter\" {\n  forward_to  = [loki.write.btp_logs.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs\" {\n  endpoint {\n    url = {{ .Values.endpoints.internal.loki.url | quote }}\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.loki.enabled }}\nloki.process \"redact_tokens_external\" {\n  forward_to = [loki.secretfilter.secret_filter_external.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter_external\" {\n  forward_to  = [loki.write.btp_logs_external.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs_external\" {\n  endpoint {\n    url = {{ .Values.endpoints.external.loki.url | quote }}\n\n    {{- if and .Values.endpoints.external.loki.basicAuth.username .Values.endpoints.external.loki.basicAuth.password }}\n    basic_auth {\n      username = {{ .Values.endpoints.external.loki.basicAuth.username | quote }}\n      password = {{ .Values.endpoints.external.loki.basicAuth.password | quote }}\n    }\n    {{- end }}\n  }\n}\n{{- end }}\n\notelcol.receiver.otlp \"atk_traces\" {\n  grpc {\n    endpoint = \"0.0.0.0:4317\"\n  }\n\n  http {\n    endpoint = \"0.0.0.0:4318\"\n  }\n\n  output {\n    traces  = [otelcol.processor.batch.atk_traces.input]\n  }\n}\n\notelcol.processor.batch \"atk_traces\" {\n  send_batch_size = 16384\n  send_batch_max_size = 16384\n  timeout = \"2s\"\n\n  output {\n    traces  = [{{ if .Values.endpoints.internal.otel.enabled }}otelcol.exporter.otlphttp.atk_traces_internal.input{{ end }}{{ if .Values.endpoints.external.otel.enabled }}{{ if .Values.endpoints.internal.otel.enabled }},{{ end }}otelcol.exporter.otlphttp.atk_traces_external.input{{ end }}]\n  }\n}\n\n{{- if .Values.endpoints.internal.otel.enabled }}\notelcol.exporter.otlphttp \"atk_traces_internal\" {\n  client {\n    endpoint = {{ .Values.endpoints.internal.otel.url | quote }}\n    tls {\n      insecure             = true\n      insecure_skip_verify = true\n    }\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.otel.enabled }}\notelcol.exporter.otlp \"atk_traces_external\" {\n  client {\n    endpoint = {{ .Values.endpoints.external.otel.url | quote }}\n\n\n    {{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\n    auth     = otelcol.auth.basic.atk_traces_external.handler\n    {{- end }}\n  }\n}\n\n{{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\notelcol.auth.basic \"atk_traces_external\" {\n  username = {{ .Values.endpoints.external.otel.basicAuth.username | quote }}\n  password = {{ .Values.endpoints.external.otel.basicAuth.password | quote }}\n}\n{{- end }}\n\n{{- end }}\n"` | Alloy configuration content in HCL format |
| alloy.alloy.enableReporting | bool | `false` | Enable usage reporting to Grafana Labs |
| alloy.alloy.extraPorts | list | `[{"name":"otel-grpc","port":4317,"protocol":"TCP","targetPort":4317},{"name":"otel-http","port":4318,"protocol":"TCP","targetPort":4318}]` | Extra ports to expose on Alloy pods |
| alloy.alloy.extraPorts[0] | string | `{"name":"otel-grpc","port":4317,"protocol":"TCP","targetPort":4317}` | Port name for OpenTelemetry gRPC |
| alloy.alloy.extraPorts[0].port | int | `4317` | Service port for OpenTelemetry gRPC |
| alloy.alloy.extraPorts[0].protocol | string | `"TCP"` | Protocol for OpenTelemetry gRPC |
| alloy.alloy.extraPorts[0].targetPort | int | `4317` | Target port for OpenTelemetry gRPC |
| alloy.alloy.extraPorts[1] | string | `{"name":"otel-http","port":4318,"protocol":"TCP","targetPort":4318}` | Port name for OpenTelemetry HTTP |
| alloy.alloy.extraPorts[1].port | int | `4318` | Service port for OpenTelemetry HTTP |
| alloy.alloy.extraPorts[1].protocol | string | `"TCP"` | Protocol for OpenTelemetry HTTP |
| alloy.alloy.extraPorts[1].targetPort | int | `4318` | Target port for OpenTelemetry HTTP |
| alloy.alloy.resources | object | `{}` | Resource requests and limits for Alloy |
| alloy.alloy.stabilityLevel | string | `"experimental"` | Stability level for experimental features |
| alloy.clustername | string | `""` | Cluster name label for metrics and logs |
| alloy.configReloader | object | `{"image":{"registry":"ghcr.io"}}` | Config reloader sidecar configuration |
| alloy.configReloader.image | object | `{"registry":"ghcr.io"}` | Config reloader image configuration |
| alloy.configReloader.image.registry | string | `"ghcr.io"` | Image registry for config reloader |
| alloy.controller | object | `{"type":"deployment"}` | Controller configuration |
| alloy.controller.type | string | `"deployment"` | Controller type (deployment, daemonset, or statefulset) |
| alloy.crds | object | `{"create":false}` | Custom Resource Definitions configuration |
| alloy.crds.create | bool | `false` | Create CRDs during installation |
| alloy.enabled | bool | `true` | Enable Alloy deployment |
| alloy.endpoints | object | `{"external":{"loki":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"otel":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"prometheus":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}},"internal":{"loki":{"enabled":true,"url":"http://logs:3100/loki/api/v1/push"},"otel":{"enabled":true,"url":"http://tempo:4318"},"prometheus":{"enabled":true,"url":"http://metrics:8428/api/v1/write"}}}` | Observability endpoints configuration |
| alloy.endpoints.external | object | `{"loki":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"otel":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"prometheus":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}}` | External endpoints configuration for remote services |
| alloy.endpoints.external.loki | object | `{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}` | External Loki endpoint configuration |
| alloy.endpoints.external.loki.basicAuth | object | `{"password":null,"username":null}` | Basic authentication for external Loki |
| alloy.endpoints.external.loki.basicAuth.password | string | `nil` | Password for external Loki basic auth |
| alloy.endpoints.external.loki.basicAuth.username | string | `nil` | Username for external Loki basic auth |
| alloy.endpoints.external.loki.enabled | bool | `false` | Enable external Loki log shipping |
| alloy.endpoints.external.loki.url | string | `""` | External Loki push URL |
| alloy.endpoints.external.otel | object | `{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}` | External OpenTelemetry endpoint configuration |
| alloy.endpoints.external.otel.basicAuth | object | `{"password":null,"username":null}` | Basic authentication for external OpenTelemetry |
| alloy.endpoints.external.otel.basicAuth.password | string | `nil` | Password for external OpenTelemetry basic auth |
| alloy.endpoints.external.otel.basicAuth.username | string | `nil` | Username for external OpenTelemetry basic auth |
| alloy.endpoints.external.otel.enabled | bool | `false` | Enable external OpenTelemetry traces |
| alloy.endpoints.external.otel.url | string | `""` | External OpenTelemetry endpoint URL |
| alloy.endpoints.external.prometheus | object | `{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}` | External Prometheus endpoint configuration |
| alloy.endpoints.external.prometheus.basicAuth | object | `{"password":null,"username":null}` | Basic authentication for external Prometheus |
| alloy.endpoints.external.prometheus.basicAuth.password | string | `nil` | Password for external Prometheus basic auth |
| alloy.endpoints.external.prometheus.basicAuth.username | string | `nil` | Username for external Prometheus basic auth |
| alloy.endpoints.external.prometheus.enabled | bool | `false` | Enable external Prometheus remote write |
| alloy.endpoints.external.prometheus.url | string | `""` | External Prometheus remote write URL |
| alloy.endpoints.internal | object | `{"loki":{"enabled":true,"url":"http://logs:3100/loki/api/v1/push"},"otel":{"enabled":true,"url":"http://tempo:4318"},"prometheus":{"enabled":true,"url":"http://metrics:8428/api/v1/write"}}` | Internal endpoints configuration for on-cluster services |
| alloy.endpoints.internal.loki | object | `{"enabled":true,"url":"http://logs:3100/loki/api/v1/push"}` | Internal Loki endpoint configuration |
| alloy.endpoints.internal.loki.enabled | bool | `true` | Enable internal Loki log shipping |
| alloy.endpoints.internal.loki.url | string | `"http://logs:3100/loki/api/v1/push"` | Internal Loki push URL |
| alloy.endpoints.internal.otel | object | `{"enabled":true,"url":"http://tempo:4318"}` | Internal OpenTelemetry endpoint configuration |
| alloy.endpoints.internal.otel.enabled | bool | `true` | Enable internal OpenTelemetry traces |
| alloy.endpoints.internal.otel.url | string | `"http://tempo:4318"` | Internal OpenTelemetry HTTP endpoint URL |
| alloy.endpoints.internal.prometheus | object | `{"enabled":true,"url":"http://metrics:8428/api/v1/write"}` | Internal Prometheus endpoint configuration |
| alloy.endpoints.internal.prometheus.enabled | bool | `true` | Enable internal Prometheus remote write |
| alloy.endpoints.internal.prometheus.url | string | `"http://metrics:8428/api/v1/write"` | Internal Prometheus remote write URL |
| alloy.fullnameOverride | string | `"alloy"` | String to fully override common.names.fullname |
| alloy.global | object | `{"image":{"pullSecrets":[]}}` | Global configuration |
| alloy.global.image | object | `{"pullSecrets":[]}` | Global image configuration |
| alloy.global.image.pullSecrets | list | `[]` | Global Docker registry secret names as an array |
| alloy.image | object | `{"registry":"docker.io"}` | Alloy image configuration |
| alloy.image.registry | string | `"docker.io"` | Image registry for Alloy |
| global | object | `{"labels":{"kots.io/app-slug":"settlemint-atk"}}` | Global configuration applied to all resources |
| global.labels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Labels applied to all resources in the chart |
| global.labels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
| grafana | object | `{"adminPassword":"atk","adminUser":"settlemint","datasources":{"datasources.yaml":{"apiVersion":1,"datasources":[{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"},{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"},{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}]}},"enabled":true,"fullnameOverride":"grafana","global":{"imagePullSecrets":[],"imageRegistry":"docker.io"},"ingress":{"enabled":true,"hosts":["grafana.k8s.orb.local"],"ingressClassName":"atk-nginx"},"initChownData":{"enabled":false},"persistence":{"enabled":false,"size":"1Gi"},"plugins":["https://storage.googleapis.com/integration-artifacts/grafana-lokiexplore-app/grafana-lokiexplore-app-latest.zip;grafana-lokiexplore-app"],"podLabels":{"app.kubernetes.io/managed-by":"helm","kots.io/app-slug":"settlemint-atk"},"sidecar":{"alerts":{"enabled":false,"label":"grafana_alert","labelValue":"1","searchNamespace":"ALL","slackChannel":"","slackUrl":"","slackUsername":""},"dashboards":{"enabled":true,"folderAnnotation":"grafana_folder","provider":{"allowUiUpdates":true,"foldersFromFilesStructure":true},"searchNamespace":"ALL"},"datasources":{"enabled":true,"initDatasources":true},"plugins":{"enabled":true}}}` | Grafana configuration |
| grafana.adminPassword | string | `"atk"` | Grafana admin password |
| grafana.adminUser | string | `"settlemint"` | Grafana admin username |
| grafana.datasources | object | `{"datasources.yaml":{"apiVersion":1,"datasources":[{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"},{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"},{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}]}}` | Datasource configuration |
| grafana.datasources."datasources.yaml" | object | `{"apiVersion":1,"datasources":[{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"},{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"},{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}]}` | Datasources YAML configuration |
| grafana.datasources."datasources.yaml".apiVersion | int | `1` | Datasource API version |
| grafana.datasources."datasources.yaml".datasources | list | `[{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"},{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"},{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}]` | List of datasources |
| grafana.datasources."datasources.yaml".datasources[0] | string | `{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"}` | Prometheus datasource name |
| grafana.datasources."datasources.yaml".datasources[0].access | string | `"proxy"` | Datasource access mode |
| grafana.datasources."datasources.yaml".datasources[0].isDefault | bool | `true` | Set as default datasource |
| grafana.datasources."datasources.yaml".datasources[0].type | string | `"prometheus"` | Datasource type |
| grafana.datasources."datasources.yaml".datasources[0].uid | string | `"prometheus"` | Datasource unique identifier |
| grafana.datasources."datasources.yaml".datasources[0].url | string | `"http://metrics:8428"` | Prometheus URL |
| grafana.datasources."datasources.yaml".datasources[1] | string | `{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"}` | Loki datasource name |
| grafana.datasources."datasources.yaml".datasources[1].access | string | `"proxy"` | Datasource access mode |
| grafana.datasources."datasources.yaml".datasources[1].isDefault | bool | `false` | Set as default datasource |
| grafana.datasources."datasources.yaml".datasources[1].jsonData | object | `{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60}` | Loki JSON data configuration |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.derivedFields | list | `[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}]` | Derived fields configuration for trace linking |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.derivedFields[0] | string | `{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}` | Target datasource UID for trace links |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.derivedFields[0].matcherRegex | string | `"^.*?traceI[d|D]=(\\w+).*$"` | Regex to extract trace ID from logs |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.derivedFields[0].name | string | `"traceId"` | Field name for trace ID |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.derivedFields[0].url | string | `"$${__value.raw}"` | URL template for trace links |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.maxLines | int | `1000` | Maximum lines to return |
| grafana.datasources."datasources.yaml".datasources[1].jsonData.timeout | int | `60` | Query timeout in seconds |
| grafana.datasources."datasources.yaml".datasources[1].type | string | `"loki"` | Datasource type |
| grafana.datasources."datasources.yaml".datasources[1].uid | string | `"loki"` | Datasource unique identifier |
| grafana.datasources."datasources.yaml".datasources[1].url | string | `"http://logs:3100"` | Loki URL |
| grafana.datasources."datasources.yaml".datasources[2] | string | `{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}` | PostgreSQL datasource name |
| grafana.datasources."datasources.yaml".datasources[2].access | string | `"proxy"` | Datasource access mode |
| grafana.datasources."datasources.yaml".datasources[2].database | string | `"thegraph"` | Database name |
| grafana.datasources."datasources.yaml".datasources[2].isDefault | bool | `false` | Set as default datasource |
| grafana.datasources."datasources.yaml".datasources[2].jsonData | object | `{"postgresVersion":15,"sslmode":"disable","timescaledb":false}` | PostgreSQL JSON data configuration |
| grafana.datasources."datasources.yaml".datasources[2].jsonData.postgresVersion | int | `15` | PostgreSQL version |
| grafana.datasources."datasources.yaml".datasources[2].jsonData.sslmode | string | `"disable"` | SSL mode for PostgreSQL connection |
| grafana.datasources."datasources.yaml".datasources[2].jsonData.timescaledb | bool | `false` | Enable TimescaleDB support |
| grafana.datasources."datasources.yaml".datasources[2].secureJsonData | object | `{"password":"atk"}` | Secure JSON data for sensitive fields |
| grafana.datasources."datasources.yaml".datasources[2].secureJsonData.password | string | `"atk"` | Database password |
| grafana.datasources."datasources.yaml".datasources[2].type | string | `"postgres"` | Datasource type |
| grafana.datasources."datasources.yaml".datasources[2].uid | string | `"postgres"` | Datasource unique identifier |
| grafana.datasources."datasources.yaml".datasources[2].url | string | `"postgresql:5432"` | PostgreSQL URL |
| grafana.datasources."datasources.yaml".datasources[2].user | string | `"thegraph"` | Database user |
| grafana.enabled | bool | `true` | Enable Grafana deployment |
| grafana.fullnameOverride | string | `"grafana"` | String to fully override common.names.fullname |
| grafana.global | object | `{"imagePullSecrets":[],"imageRegistry":"docker.io"}` | Global configuration |
| grafana.global.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array |
| grafana.global.imageRegistry | string | `"docker.io"` | Global image registry |
| grafana.ingress | object | `{"enabled":true,"hosts":["grafana.k8s.orb.local"],"ingressClassName":"atk-nginx"}` | Ingress configuration for Grafana |
| grafana.ingress.enabled | bool | `true` | Enable ingress for Grafana |
| grafana.ingress.hosts | list | `["grafana.k8s.orb.local"]` | List of ingress hosts |
| grafana.ingress.hosts[0] | string | `"grafana.k8s.orb.local"` | Host name for Grafana ingress |
| grafana.ingress.ingressClassName | string | `"atk-nginx"` | Ingress class name |
| grafana.initChownData | object | `{"enabled":false}` | Init container to fix permissions |
| grafana.initChownData.enabled | bool | `false` | Enable init container for chown |
| grafana.persistence | object | `{"enabled":false,"size":"1Gi"}` | Persistent volume configuration |
| grafana.persistence.enabled | bool | `false` | Enable persistent volume for Grafana |
| grafana.persistence.size | string | `"1Gi"` | Size of persistent volume |
| grafana.plugins | list | `["https://storage.googleapis.com/integration-artifacts/grafana-lokiexplore-app/grafana-lokiexplore-app-latest.zip;grafana-lokiexplore-app"]` | List of Grafana plugins to install |
| grafana.plugins[0] | string | `"https://storage.googleapis.com/integration-artifacts/grafana-lokiexplore-app/grafana-lokiexplore-app-latest.zip;grafana-lokiexplore-app"` | Loki Explore app plugin URL |
| grafana.podLabels | object | `{"app.kubernetes.io/managed-by":"helm","kots.io/app-slug":"settlemint-atk"}` | Additional labels for Grafana pods |
| grafana.podLabels."app.kubernetes.io/managed-by" | string | `"helm"` | Helm managed-by label |
| grafana.podLabels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
| grafana.sidecar | object | `{"alerts":{"enabled":false,"label":"grafana_alert","labelValue":"1","searchNamespace":"ALL","slackChannel":"","slackUrl":"","slackUsername":""},"dashboards":{"enabled":true,"folderAnnotation":"grafana_folder","provider":{"allowUiUpdates":true,"foldersFromFilesStructure":true},"searchNamespace":"ALL"},"datasources":{"enabled":true,"initDatasources":true},"plugins":{"enabled":true}}` | Sidecar configuration for auto-loading resources |
| grafana.sidecar.alerts | object | `{"enabled":false,"label":"grafana_alert","labelValue":"1","searchNamespace":"ALL","slackChannel":"","slackUrl":"","slackUsername":""}` | Alert sidecar configuration |
| grafana.sidecar.alerts.enabled | bool | `false` | Enable alert sidecar |
| grafana.sidecar.alerts.label | string | `"grafana_alert"` | Label key for alert discovery |
| grafana.sidecar.alerts.labelValue | string | `"1"` | Label value for alert discovery |
| grafana.sidecar.alerts.searchNamespace | string | `"ALL"` | Namespace to search for alerts (ALL for all namespaces) |
| grafana.sidecar.alerts.slackChannel | string | `""` | Slack channel for alerts |
| grafana.sidecar.alerts.slackUrl | string | `""` | Slack webhook URL for alerts |
| grafana.sidecar.alerts.slackUsername | string | `""` | Slack username for alerts |
| grafana.sidecar.dashboards | object | `{"enabled":true,"folderAnnotation":"grafana_folder","provider":{"allowUiUpdates":true,"foldersFromFilesStructure":true},"searchNamespace":"ALL"}` | Dashboard sidecar configuration |
| grafana.sidecar.dashboards.enabled | bool | `true` | Enable dashboard sidecar |
| grafana.sidecar.dashboards.folderAnnotation | string | `"grafana_folder"` | Annotation key for folder assignment |
| grafana.sidecar.dashboards.provider | object | `{"allowUiUpdates":true,"foldersFromFilesStructure":true}` | Dashboard provider configuration |
| grafana.sidecar.dashboards.provider.allowUiUpdates | bool | `true` | Allow UI updates to dashboards |
| grafana.sidecar.dashboards.provider.foldersFromFilesStructure | bool | `true` | Create folders from file structure |
| grafana.sidecar.dashboards.searchNamespace | string | `"ALL"` | Namespace to search for dashboards (ALL for all namespaces) |
| grafana.sidecar.datasources | object | `{"enabled":true,"initDatasources":true}` | Datasource sidecar configuration |
| grafana.sidecar.datasources.enabled | bool | `true` | Enable datasource sidecar |
| grafana.sidecar.datasources.initDatasources | bool | `true` | Initialize datasources on startup |
| grafana.sidecar.plugins | object | `{"enabled":true}` | Plugin sidecar configuration |
| grafana.sidecar.plugins.enabled | bool | `true` | Enable plugin sidecar |
| kube-state-metrics | object | `{"customLabels":{"kots.io/app-slug":"settlemint-atk"},"enabled":true,"fullnameOverride":"kube-state-metrics","image":{"registry":"registry.k8s.io"},"imagePullSecrets":[],"metricLabelsAllowlist":["pods=[*]","ingresses=[*]"],"podAnnotations":{"prometheus.io/scrape":"true"}}` | Kube State Metrics configuration |
| kube-state-metrics.customLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Custom labels to add to all resources |
| kube-state-metrics.enabled | bool | `true` | Enable kube-state-metrics deployment |
| kube-state-metrics.fullnameOverride | string | `"kube-state-metrics"` | String to fully override common.names.fullname (string) |
| kube-state-metrics.image | object | `{"registry":"registry.k8s.io"}` | Kube state metrics image configuration |
| kube-state-metrics.image.registry | string | `"registry.k8s.io"` | Kube state metrics image registry |
| kube-state-metrics.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| kube-state-metrics.metricLabelsAllowlist | list | `["pods=[*]","ingresses=[*]"]` | Allow list for metric labels |
| kube-state-metrics.podAnnotations | object | `{"prometheus.io/scrape":"true"}` | Annotations for kube-state-metrics pods |
| loki | object | `{"backend":{"replicas":0},"bloomCompactor":{"replicas":0},"bloomGateway":{"replicas":0},"chunksCache":{"allocatedMemory":1024,"enabled":false,"writebackSizeLimit":"100MB"},"compactor":{"replicas":0},"deploymentMode":"SingleBinary","distributor":{"replicas":0},"enabled":true,"fullnameOverride":"logs","gateway":{"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":null}},"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Logs","nginx.ingress.kubernetes.io/auth-secret":"observability-logs","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}],"ingressClassName":"atk-nginx"}},"global":{"image":{"registry":"docker.io"}},"imagePullSecrets":[],"indexGateway":{"replicas":0},"ingester":{"replicas":0},"loki":{"auth_enabled":false,"commonConfig":{"replication_factor":1},"compactor":{"compaction_interval":"60m","delete_request_store":"filesystem","retention_delete_delay":"2h","retention_delete_worker_count":150,"retention_enabled":true,"working_directory":"/var/loki/retention"},"ingester":{"chunk_encoding":"snappy"},"limits_config":{"allow_structured_metadata":true,"cardinality_limit":200000,"ingestion_burst_size_mb":1000,"ingestion_rate_mb":1000,"max_entries_limit_per_query":1000000,"max_global_streams_per_user":10000,"max_label_name_length":10240,"max_label_names_per_series":300,"max_label_value_length":20480,"max_line_size":100982429,"max_query_parallelism":2,"max_query_series":10000,"per_stream_rate_limit":"512M","per_stream_rate_limit_burst":"1024M","reject_old_samples":true,"reject_old_samples_max_age":"24h","retention_period":"168h","split_queries_by_interval":"15m","volume_enabled":true},"pattern_receiver":{"enabled":true},"querier":{"max_concurrent":2},"schemaConfig":{"configs":[{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}]},"server":{"grpc_server_max_recv_msg_size":100982429,"grpc_server_max_send_msg_size":100982429},"storage":{"type":"filesystem"},"tracing":{"enabled":true}},"lokiCanary":{"enabled":false},"memcached":{"image":{"repository":"docker.io/library/memcached"}},"memcachedExporter":{"image":{"repository":"docker.io/prom/memcached-exporter"}},"minio":{"enabled":false},"querier":{"replicas":0},"queryFrontend":{"replicas":0},"queryScheduler":{"replicas":0},"read":{"replicas":0},"resultsCache":{"enabled":false},"sidecar":{"image":{"repository":"docker.io/kiwigrid/k8s-sidecar"}},"singleBinary":{"persistence":{"size":"10Gi"},"replicas":1,"resources":{}},"test":{"enabled":false},"write":{"replicas":0}}` | Loki configuration |
| loki.backend | object | `{"replicas":0}` | Backend component configuration |
| loki.backend.replicas | int | `0` | Number of backend replicas (0 when using SingleBinary) |
| loki.bloomCompactor | object | `{"replicas":0}` | Bloom compactor component configuration |
| loki.bloomCompactor.replicas | int | `0` | Number of bloom compactor replicas (0 when using SingleBinary) |
| loki.bloomGateway | object | `{"replicas":0}` | Bloom gateway component configuration |
| loki.bloomGateway.replicas | int | `0` | Number of bloom gateway replicas (0 when using SingleBinary) |
| loki.chunksCache | object | `{"allocatedMemory":1024,"enabled":false,"writebackSizeLimit":"100MB"}` | Chunks cache configuration |
| loki.chunksCache.allocatedMemory | int | `1024` | Allocated memory for chunks cache in MB |
| loki.chunksCache.enabled | bool | `false` | Enable chunks cache |
| loki.chunksCache.writebackSizeLimit | string | `"100MB"` | Writeback size limit for chunks cache |
| loki.compactor | object | `{"replicas":0}` | Compactor component configuration |
| loki.compactor.replicas | int | `0` | Number of compactor replicas (0 when using SingleBinary) |
| loki.deploymentMode | string | `"SingleBinary"` | Deployment mode for Loki (SingleBinary, SimpleScalable, or Distributed) |
| loki.distributor | object | `{"replicas":0}` | Distributor component configuration |
| loki.distributor.replicas | int | `0` | Number of distributor replicas (0 when using SingleBinary) |
| loki.enabled | bool | `true` | Enable Loki deployment |
| loki.fullnameOverride | string | `"logs"` | String to fully override common.names.fullname |
| loki.gateway | object | `{"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":null}},"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Logs","nginx.ingress.kubernetes.io/auth-secret":"observability-logs","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}],"ingressClassName":"atk-nginx"}}` | Gateway configuration |
| loki.gateway.affinity | object | `{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":null}}` | Affinity rules for gateway pods |
| loki.gateway.affinity.podAntiAffinity | object | `{"requiredDuringSchedulingIgnoredDuringExecution":null}` | Pod anti-affinity rules |
| loki.gateway.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution | object | `nil` | Required anti-affinity rules during scheduling |
| loki.gateway.ingress | object | `{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Logs","nginx.ingress.kubernetes.io/auth-secret":"observability-logs","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}],"ingressClassName":"atk-nginx"}` | Ingress configuration for gateway |
| loki.gateway.ingress.annotations | object | `{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Logs","nginx.ingress.kubernetes.io/auth-secret":"observability-logs","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"}` | Ingress annotations |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/auth-realm" | string | `"Authentication Required - Logs"` | Authentication realm message |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/auth-secret" | string | `"observability-logs"` | Secret name for basic authentication |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/auth-type" | string | `"basic"` | Authentication type for ingress |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/client-body-buffer-size" | string | `"500m"` | Buffer size for reading client request body |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/proxy-body-size" | string | `"500m"` | Maximum allowed size of client request body |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/proxy-read-timeout" | string | `"3600"` | Timeout for reading a response from proxied server |
| loki.gateway.ingress.annotations."nginx.ingress.kubernetes.io/proxy-send-timeout" | string | `"3600"` | Timeout for transmitting a request to proxied server |
| loki.gateway.ingress.enabled | bool | `false` | Enable ingress for gateway |
| loki.gateway.ingress.hosts | list | `[{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}]` | List of ingress hosts |
| loki.gateway.ingress.hosts[0] | string | `{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}` | Host name for ingress |
| loki.gateway.ingress.hosts[0].paths | list | `[{"path":"/","pathType":"Prefix"}]` | List of paths for this host |
| loki.gateway.ingress.hosts[0].paths[0] | string | `{"path":"/","pathType":"Prefix"}` | Path for ingress rule |
| loki.gateway.ingress.hosts[0].paths[0].pathType | string | `"Prefix"` | Path type for ingress rule |
| loki.gateway.ingress.ingressClassName | string | `"atk-nginx"` | Ingress class name |
| loki.global | object | `{"image":{"registry":"docker.io"}}` | Global configuration |
| loki.global.image | object | `{"registry":"docker.io"}` | Global image configuration |
| loki.global.image.registry | string | `"docker.io"` | Global image registry |
| loki.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array |
| loki.indexGateway | object | `{"replicas":0}` | Index gateway component configuration |
| loki.indexGateway.replicas | int | `0` | Number of index gateway replicas (0 when using SingleBinary) |
| loki.ingester | object | `{"replicas":0}` | Ingester component configuration |
| loki.ingester.replicas | int | `0` | Number of ingester replicas (0 when using SingleBinary) |
| loki.loki | object | `{"auth_enabled":false,"commonConfig":{"replication_factor":1},"compactor":{"compaction_interval":"60m","delete_request_store":"filesystem","retention_delete_delay":"2h","retention_delete_worker_count":150,"retention_enabled":true,"working_directory":"/var/loki/retention"},"ingester":{"chunk_encoding":"snappy"},"limits_config":{"allow_structured_metadata":true,"cardinality_limit":200000,"ingestion_burst_size_mb":1000,"ingestion_rate_mb":1000,"max_entries_limit_per_query":1000000,"max_global_streams_per_user":10000,"max_label_name_length":10240,"max_label_names_per_series":300,"max_label_value_length":20480,"max_line_size":100982429,"max_query_parallelism":2,"max_query_series":10000,"per_stream_rate_limit":"512M","per_stream_rate_limit_burst":"1024M","reject_old_samples":true,"reject_old_samples_max_age":"24h","retention_period":"168h","split_queries_by_interval":"15m","volume_enabled":true},"pattern_receiver":{"enabled":true},"querier":{"max_concurrent":2},"schemaConfig":{"configs":[{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}]},"server":{"grpc_server_max_recv_msg_size":100982429,"grpc_server_max_send_msg_size":100982429},"storage":{"type":"filesystem"},"tracing":{"enabled":true}}` | Loki server configuration |
| loki.loki.auth_enabled | bool | `false` | Enable authentication for Loki |
| loki.loki.commonConfig | object | `{"replication_factor":1}` | Common configuration settings |
| loki.loki.commonConfig.replication_factor | int | `1` | Number of replicas for data replication |
| loki.loki.compactor | object | `{"compaction_interval":"60m","delete_request_store":"filesystem","retention_delete_delay":"2h","retention_delete_worker_count":150,"retention_enabled":true,"working_directory":"/var/loki/retention"}` | Compactor configuration |
| loki.loki.compactor.compaction_interval | string | `"60m"` | Interval between compaction runs |
| loki.loki.compactor.delete_request_store | string | `"filesystem"` | Store type for delete requests |
| loki.loki.compactor.retention_delete_delay | string | `"2h"` | Delay before deleting retained data |
| loki.loki.compactor.retention_delete_worker_count | int | `150` | Number of workers for deletion |
| loki.loki.compactor.retention_enabled | bool | `true` | Enable retention in compactor |
| loki.loki.compactor.working_directory | string | `"/var/loki/retention"` | Working directory for compactor |
| loki.loki.ingester | object | `{"chunk_encoding":"snappy"}` | Ingester configuration |
| loki.loki.ingester.chunk_encoding | string | `"snappy"` | Chunk compression encoding |
| loki.loki.limits_config | object | `{"allow_structured_metadata":true,"cardinality_limit":200000,"ingestion_burst_size_mb":1000,"ingestion_rate_mb":1000,"max_entries_limit_per_query":1000000,"max_global_streams_per_user":10000,"max_label_name_length":10240,"max_label_names_per_series":300,"max_label_value_length":20480,"max_line_size":100982429,"max_query_parallelism":2,"max_query_series":10000,"per_stream_rate_limit":"512M","per_stream_rate_limit_burst":"1024M","reject_old_samples":true,"reject_old_samples_max_age":"24h","retention_period":"168h","split_queries_by_interval":"15m","volume_enabled":true}` | Limits configuration |
| loki.loki.limits_config.allow_structured_metadata | bool | `true` | Allow structured metadata in logs |
| loki.loki.limits_config.cardinality_limit | int | `200000` | Cardinality limit for label combinations |
| loki.loki.limits_config.ingestion_burst_size_mb | int | `1000` | Ingestion burst size in MB |
| loki.loki.limits_config.ingestion_rate_mb | int | `1000` | Ingestion rate in MB per second |
| loki.loki.limits_config.max_entries_limit_per_query | int | `1000000` | Maximum entries limit per query |
| loki.loki.limits_config.max_global_streams_per_user | int | `10000` | Maximum global streams per user |
| loki.loki.limits_config.max_label_name_length | int | `10240` | Maximum label name length |
| loki.loki.limits_config.max_label_names_per_series | int | `300` | Maximum label names per series |
| loki.loki.limits_config.max_label_value_length | int | `20480` | Maximum label value length |
| loki.loki.limits_config.max_line_size | int | `100982429` | Maximum line size in bytes |
| loki.loki.limits_config.max_query_parallelism | int | `2` | Maximum parallelism for queries |
| loki.loki.limits_config.max_query_series | int | `10000` | Maximum number of series in a query |
| loki.loki.limits_config.per_stream_rate_limit | string | `"512M"` | Rate limit per stream |
| loki.loki.limits_config.per_stream_rate_limit_burst | string | `"1024M"` | Burst rate limit per stream |
| loki.loki.limits_config.reject_old_samples | bool | `true` | Reject samples older than max age |
| loki.loki.limits_config.reject_old_samples_max_age | string | `"24h"` | Maximum age for samples |
| loki.loki.limits_config.retention_period | string | `"168h"` | Log retention period |
| loki.loki.limits_config.split_queries_by_interval | string | `"15m"` | Interval for splitting queries |
| loki.loki.limits_config.volume_enabled | bool | `true` | Enable volume endpoints |
| loki.loki.pattern_receiver | object | `{"enabled":true}` | Pattern receiver configuration for log pattern detection |
| loki.loki.pattern_receiver.enabled | bool | `true` | Enable pattern receiver |
| loki.loki.querier | object | `{"max_concurrent":2}` | Querier configuration |
| loki.loki.querier.max_concurrent | int | `2` | Maximum concurrent queries |
| loki.loki.schemaConfig | object | `{"configs":[{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}]}` | Schema configuration for index and chunks |
| loki.loki.schemaConfig.configs | list | `[{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}]` | List of schema configurations |
| loki.loki.schemaConfig.configs[0] | string | `{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}` | Schema start date |
| loki.loki.schemaConfig.configs[0].index | object | `{"period":"24h","prefix":"loki_index_"}` | Index configuration |
| loki.loki.schemaConfig.configs[0].index.period | string | `"24h"` | Index rotation period |
| loki.loki.schemaConfig.configs[0].index.prefix | string | `"loki_index_"` | Index prefix for table names |
| loki.loki.schemaConfig.configs[0].object_store | string | `"filesystem"` | Object store type |
| loki.loki.schemaConfig.configs[0].schema | string | `"v13"` | Schema version |
| loki.loki.schemaConfig.configs[0].store | string | `"tsdb"` | Index store type |
| loki.loki.server | object | `{"grpc_server_max_recv_msg_size":100982429,"grpc_server_max_send_msg_size":100982429}` | Server configuration |
| loki.loki.server.grpc_server_max_recv_msg_size | int | `100982429` | Maximum gRPC message receive size in bytes |
| loki.loki.server.grpc_server_max_send_msg_size | int | `100982429` | Maximum gRPC message send size in bytes |
| loki.loki.storage | object | `{"type":"filesystem"}` | Storage configuration |
| loki.loki.storage.type | string | `"filesystem"` | Storage backend type |
| loki.loki.tracing | object | `{"enabled":true}` | Tracing configuration |
| loki.loki.tracing.enabled | bool | `true` | Enable tracing |
| loki.lokiCanary | object | `{"enabled":false}` | Loki canary configuration for monitoring |
| loki.lokiCanary.enabled | bool | `false` | Enable Loki canary |
| loki.memcached | object | `{"image":{"repository":"docker.io/library/memcached"}}` | Memcached configuration |
| loki.memcached.image | object | `{"repository":"docker.io/library/memcached"}` | Memcached image configuration |
| loki.memcached.image.repository | string | `"docker.io/library/memcached"` | Memcached image repository |
| loki.memcachedExporter | object | `{"image":{"repository":"docker.io/prom/memcached-exporter"}}` | Memcached exporter configuration |
| loki.memcachedExporter.image | object | `{"repository":"docker.io/prom/memcached-exporter"}` | Memcached exporter image configuration |
| loki.memcachedExporter.image.repository | string | `"docker.io/prom/memcached-exporter"` | Memcached exporter image repository |
| loki.minio | object | `{"enabled":false}` | MinIO configuration for object storage |
| loki.minio.enabled | bool | `false` | Enable MinIO deployment |
| loki.querier | object | `{"replicas":0}` | Querier component configuration |
| loki.querier.replicas | int | `0` | Number of querier replicas (0 when using SingleBinary) |
| loki.queryFrontend | object | `{"replicas":0}` | Query frontend component configuration |
| loki.queryFrontend.replicas | int | `0` | Number of query frontend replicas (0 when using SingleBinary) |
| loki.queryScheduler | object | `{"replicas":0}` | Query scheduler component configuration |
| loki.queryScheduler.replicas | int | `0` | Number of query scheduler replicas (0 when using SingleBinary) |
| loki.read | object | `{"replicas":0}` | Read component configuration |
| loki.read.replicas | int | `0` | Number of read replicas (0 when using SingleBinary) |
| loki.resultsCache | object | `{"enabled":false}` | Results cache configuration |
| loki.resultsCache.enabled | bool | `false` | Enable results cache |
| loki.sidecar | object | `{"image":{"repository":"docker.io/kiwigrid/k8s-sidecar"}}` | Sidecar configuration for config reloading |
| loki.sidecar.image | object | `{"repository":"docker.io/kiwigrid/k8s-sidecar"}` | Sidecar image configuration |
| loki.sidecar.image.repository | string | `"docker.io/kiwigrid/k8s-sidecar"` | The Docker registry and image for the k8s sidecar |
| loki.singleBinary | object | `{"persistence":{"size":"10Gi"},"replicas":1,"resources":{}}` | Single binary deployment configuration |
| loki.singleBinary.persistence | object | `{"size":"10Gi"}` | Persistent volume configuration |
| loki.singleBinary.persistence.size | string | `"10Gi"` | Size of persistent volume |
| loki.singleBinary.replicas | int | `1` | Number of replicas for single binary deployment |
| loki.singleBinary.resources | object | `{}` | Resource requests and limits |
| loki.test | object | `{"enabled":false}` | Test configuration |
| loki.test.enabled | bool | `false` | Enable test pods |
| loki.write | object | `{"replicas":0}` | Write component configuration |
| loki.write.replicas | int | `0` | Number of write replicas (0 when using SingleBinary) |
| metrics-server | object | `{"enabled":false,"fullnameOverride":"metrics-server","image":{"repository":"registry.k8s.io/metrics-server/metrics-server"},"imagePullSecrets":[],"podLabels":{"kots.io/app-slug":"settlemint-atk"},"server":{"persistentVolume":{"enabled":false}},"service":{"labels":{"kots.io/app-slug":"settlemint-atk"}}}` | Kubernetes Metrics Server configuration |
| metrics-server.enabled | bool | `false` | Enable metrics server deployment |
| metrics-server.fullnameOverride | string | `"metrics-server"` | String to fully override common.names.fullname (string) |
| metrics-server.image | object | `{"repository":"registry.k8s.io/metrics-server/metrics-server"}` | Metrics server image configuration |
| metrics-server.image.repository | string | `"registry.k8s.io/metrics-server/metrics-server"` | Metrics server image repository |
| metrics-server.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| metrics-server.podLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Additional labels for metrics server pods |
| metrics-server.server | object | `{"persistentVolume":{"enabled":false}}` | Server configuration |
| metrics-server.server.persistentVolume | object | `{"enabled":false}` | Persistent volume configuration |
| metrics-server.server.persistentVolume.enabled | bool | `false` | Enable persistent volume for metrics server |
| metrics-server.service | object | `{"labels":{"kots.io/app-slug":"settlemint-atk"}}` | Service configuration |
| metrics-server.service.labels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Additional labels for metrics server service |
| prometheus-node-exporter | object | `{"enabled":true,"fullnameOverride":"node-exporter","global":{"imageRegistry":"quay.io"},"image":{"registry":"quay.io"},"imagePullSecrets":[],"kubeRBACProxy":{"image":{"registry":"quay.io"}},"nameOverride":"node-exporter","podAnnotations":{"cluster-autoscaler.kubernetes.io/safe-to-evict":"true","prometheus.io/port":"9100","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"}}` | Prometheus Node Exporter configuration |
| prometheus-node-exporter.enabled | bool | `true` | Enable Prometheus Node Exporter deployment |
| prometheus-node-exporter.fullnameOverride | string | `"node-exporter"` | String to fully override common.names.fullname |
| prometheus-node-exporter.global | object | `{"imageRegistry":"quay.io"}` | Global configuration |
| prometheus-node-exporter.global.imageRegistry | string | `"quay.io"` | Global image registry |
| prometheus-node-exporter.image | object | `{"registry":"quay.io"}` | Node exporter image configuration |
| prometheus-node-exporter.image.registry | string | `"quay.io"` | Image registry for node exporter |
| prometheus-node-exporter.imagePullSecrets | list | `[]` | Docker registry secret names as an array |
| prometheus-node-exporter.kubeRBACProxy | object | `{"image":{"registry":"quay.io"}}` | Kube RBAC proxy configuration |
| prometheus-node-exporter.kubeRBACProxy.image | object | `{"registry":"quay.io"}` | Kube RBAC proxy image configuration |
| prometheus-node-exporter.kubeRBACProxy.image.registry | string | `"quay.io"` | Image registry for kube RBAC proxy |
| prometheus-node-exporter.nameOverride | string | `"node-exporter"` | String to partially override common.names.name |
| prometheus-node-exporter.podAnnotations | object | `{"cluster-autoscaler.kubernetes.io/safe-to-evict":"true","prometheus.io/port":"9100","prometheus.io/scrape":"true"}` | Annotations for node exporter pods |
| prometheus-node-exporter.podAnnotations."cluster-autoscaler.kubernetes.io/safe-to-evict" | string | `"true"` | Mark pod as safe to evict for cluster autoscaler |
| prometheus-node-exporter.podAnnotations."prometheus.io/port" | string | `"9100"` | Port for Prometheus scraping |
| prometheus-node-exporter.podAnnotations."prometheus.io/scrape" | string | `"true"` | Enable Prometheus scraping |
| prometheus-node-exporter.podLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Labels for node exporter pods |
| prometheus-node-exporter.podLabels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
| tempo | object | `{"enabled":true,"fullnameOverride":"tempo","persistence":{"enabled":true,"size":"10Gi"},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"3100","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"securityContext":{"fsGroup":65532,"runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532},"tempo":{"metricsGenerator":{"enabled":true,"remoteWriteUrl":"http://o11y-metrics:8428/api/v1/write"},"overrides":{"defaults":{"global":{"max_bytes_per_trace":20000000},"ingestion":{"max_traces_per_user":100000,"rate_limit_bytes":30000000}}},"pullSecrets":[],"reportingEnabled":false,"repository":"docker.io/grafana/tempo","retention":"168h"},"tempoQuery":{"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":["traces.k8s.orb.local"],"ingressClassName":"atk-nginx","pathType":"Prefix"},"pullSecrets":[],"repository":"docker.io/grafana/tempo-query"}}` | Tempo configuration |
| tempo.enabled | bool | `true` | Enable Tempo deployment |
| tempo.fullnameOverride | string | `"tempo"` | String to fully override common.names.fullname |
| tempo.persistence | object | `{"enabled":true,"size":"10Gi"}` | Persistent volume configuration |
| tempo.persistence.enabled | bool | `true` | Enable persistent volume for Tempo |
| tempo.persistence.size | string | `"10Gi"` | Size of persistent volume |
| tempo.podAnnotations | object | `{"prometheus.io/path":"/metrics","prometheus.io/port":"3100","prometheus.io/scrape":"true"}` | Annotations for Tempo pods |
| tempo.podAnnotations."prometheus.io/path" | string | `"/metrics"` | Path for Prometheus metrics endpoint |
| tempo.podAnnotations."prometheus.io/port" | string | `"3100"` | Port for Prometheus scraping |
| tempo.podAnnotations."prometheus.io/scrape" | string | `"true"` | Enable Prometheus scraping |
| tempo.podLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Labels for Tempo pods |
| tempo.podLabels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
| tempo.securityContext | object | `{"fsGroup":65532,"runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532}` | Security context for Tempo pods |
| tempo.securityContext.fsGroup | int | `65532` | Filesystem group ID |
| tempo.securityContext.runAsGroup | int | `65532` | Group ID to run as |
| tempo.securityContext.runAsNonRoot | bool | `true` | Run as non-root user |
| tempo.securityContext.runAsUser | int | `65532` | User ID to run as |
| tempo.tempo | object | `{"metricsGenerator":{"enabled":true,"remoteWriteUrl":"http://o11y-metrics:8428/api/v1/write"},"overrides":{"defaults":{"global":{"max_bytes_per_trace":20000000},"ingestion":{"max_traces_per_user":100000,"rate_limit_bytes":30000000}}},"pullSecrets":[],"reportingEnabled":false,"repository":"docker.io/grafana/tempo","retention":"168h"}` | Tempo server configuration |
| tempo.tempo.metricsGenerator | object | `{"enabled":true,"remoteWriteUrl":"http://o11y-metrics:8428/api/v1/write"}` | Metrics generator configuration |
| tempo.tempo.metricsGenerator.enabled | bool | `true` | Enable metrics generator |
| tempo.tempo.metricsGenerator.remoteWriteUrl | string | `"http://o11y-metrics:8428/api/v1/write"` | Remote write URL for generated metrics |
| tempo.tempo.overrides | object | `{"defaults":{"global":{"max_bytes_per_trace":20000000},"ingestion":{"max_traces_per_user":100000,"rate_limit_bytes":30000000}}}` | Per-tenant overrides configuration |
| tempo.tempo.overrides.defaults | object | `{"global":{"max_bytes_per_trace":20000000},"ingestion":{"max_traces_per_user":100000,"rate_limit_bytes":30000000}}` | Default overrides for all tenants |
| tempo.tempo.overrides.defaults.global | object | `{"max_bytes_per_trace":20000000}` | Global configuration |
| tempo.tempo.overrides.defaults.global.max_bytes_per_trace | int | `20000000` | Maximum bytes per trace |
| tempo.tempo.overrides.defaults.ingestion | object | `{"max_traces_per_user":100000,"rate_limit_bytes":30000000}` | Ingestion configuration |
| tempo.tempo.overrides.defaults.ingestion.max_traces_per_user | int | `100000` | Maximum traces per user |
| tempo.tempo.overrides.defaults.ingestion.rate_limit_bytes | int | `30000000` | Rate limit in bytes per second |
| tempo.tempo.pullSecrets | list | `[]` | Docker registry secret names as an array |
| tempo.tempo.reportingEnabled | bool | `false` | Enable usage reporting to Grafana Labs |
| tempo.tempo.repository | string | `"docker.io/grafana/tempo"` | Tempo image repository |
| tempo.tempo.retention | string | `"168h"` | Trace retention period |
| tempo.tempoQuery | object | `{"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":["traces.k8s.orb.local"],"ingressClassName":"atk-nginx","pathType":"Prefix"},"pullSecrets":[],"repository":"docker.io/grafana/tempo-query"}` | Tempo query configuration |
| tempo.tempoQuery.ingress | object | `{"annotations":{"nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":["traces.k8s.orb.local"],"ingressClassName":"atk-nginx","pathType":"Prefix"}` | Ingress configuration for Tempo query |
| tempo.tempoQuery.ingress.annotations | object | `{"nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"}` | Ingress annotations |
| tempo.tempoQuery.ingress.annotations."nginx.ingress.kubernetes.io/auth-type" | string | `"basic"` | Authentication type for ingress |
| tempo.tempoQuery.ingress.annotations."nginx.ingress.kubernetes.io/client-body-buffer-size" | string | `"500m"` | Buffer size for reading client request body |
| tempo.tempoQuery.ingress.annotations."nginx.ingress.kubernetes.io/proxy-body-size" | string | `"500m"` | Maximum allowed size of client request body |
| tempo.tempoQuery.ingress.annotations."nginx.ingress.kubernetes.io/proxy-read-timeout" | string | `"3600"` | Timeout for reading a response from proxied server |
| tempo.tempoQuery.ingress.annotations."nginx.ingress.kubernetes.io/proxy-send-timeout" | string | `"3600"` | Timeout for transmitting a request to proxied server |
| tempo.tempoQuery.ingress.enabled | bool | `false` | Enable ingress for Tempo query |
| tempo.tempoQuery.ingress.hosts | list | `["traces.k8s.orb.local"]` | List of ingress hosts |
| tempo.tempoQuery.ingress.hosts[0] | string | `"traces.k8s.orb.local"` | Host name for Tempo query ingress |
| tempo.tempoQuery.ingress.ingressClassName | string | `"atk-nginx"` | Ingress class name |
| tempo.tempoQuery.ingress.pathType | string | `"Prefix"` | Path type for ingress rule |
| tempo.tempoQuery.pullSecrets | list | `[]` | Docker registry secret names as an array |
| tempo.tempoQuery.repository | string | `"docker.io/grafana/tempo-query"` | Tempo query image repository |
| victoria-metrics-single | object | `{"enabled":true,"global":{"image":{"registry":"docker.io"},"imagePullSecrets":[]},"server":{"extraArgs":{"search.maxQueryLen":163840},"fullnameOverride":"metrics","ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"},"persistentVolume":{"size":"10Gi","storageClass":""},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"resources":{},"retentionPeriod":1,"service":{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"labels":{"kots.io/app-slug":"settlemint-atk"}}}}` | Victoria Metrics Single configuration |
| victoria-metrics-single.enabled | bool | `true` | Enable Victoria Metrics Single deployment |
| victoria-metrics-single.global | object | `{"image":{"registry":"docker.io"},"imagePullSecrets":[]}` | Global configuration |
| victoria-metrics-single.global.image | object | `{"registry":"docker.io"}` | Global image configuration |
| victoria-metrics-single.global.image.registry | string | `"docker.io"` | Global image registry |
| victoria-metrics-single.global.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| victoria-metrics-single.server | object | `{"extraArgs":{"search.maxQueryLen":163840},"fullnameOverride":"metrics","ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"},"persistentVolume":{"size":"10Gi","storageClass":""},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"resources":{},"retentionPeriod":1,"service":{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"labels":{"kots.io/app-slug":"settlemint-atk"}}}` | Victoria Metrics server configuration |
| victoria-metrics-single.server.extraArgs | object | `{"search.maxQueryLen":163840}` | Extra arguments for Victoria Metrics server |
| victoria-metrics-single.server.extraArgs."search.maxQueryLen" | int | `163840` | Maximum query length |
| victoria-metrics-single.server.fullnameOverride | string | `"metrics"` | String to fully override common.names.fullname (string) |
| victoria-metrics-single.server.ingress | object | `{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"}` | Ingress configuration for Victoria Metrics |
| victoria-metrics-single.server.ingress.annotations | object | `{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"}` | Ingress annotations |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/auth-realm" | string | `"Authentication Required - Metrics"` | Authentication realm message |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/auth-secret" | string | `"observability-metrics"` | Secret name for basic authentication |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/auth-type" | string | `"basic"` | Authentication type for ingress |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/client-body-buffer-size" | string | `"500m"` | Buffer size for reading client request body |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/proxy-body-size" | string | `"500m"` | Maximum allowed size of client request body |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/proxy-read-timeout" | string | `"3600"` | Timeout for reading a response from proxied server |
| victoria-metrics-single.server.ingress.annotations."nginx.ingress.kubernetes.io/proxy-send-timeout" | string | `"3600"` | Timeout for transmitting a request to proxied server |
| victoria-metrics-single.server.ingress.enabled | bool | `false` | Enable ingress for Victoria Metrics |
| victoria-metrics-single.server.ingress.hosts | list | `[{"name":"metrics.settlemint.local","path":"/","port":"http"}]` | List of ingress hosts |
| victoria-metrics-single.server.ingress.hosts[0] | string | `{"name":"metrics.settlemint.local","path":"/","port":"http"}` | Host name for ingress |
| victoria-metrics-single.server.ingress.hosts[0].path | string | `"/"` | Path for ingress rule |
| victoria-metrics-single.server.ingress.hosts[0].port | string | `"http"` | Service port name |
| victoria-metrics-single.server.ingress.ingressClassName | string | `"atk-nginx"` | Ingress class name |
| victoria-metrics-single.server.ingress.pathType | string | `"Prefix"` | Path type for ingress rule |
| victoria-metrics-single.server.persistentVolume | object | `{"size":"10Gi","storageClass":""}` | Persistent volume configuration |
| victoria-metrics-single.server.persistentVolume.size | string | `"10Gi"` | Size of the persistent volume |
| victoria-metrics-single.server.persistentVolume.storageClass | string | `""` | Storage class for persistent volume (uses default if empty) |
| victoria-metrics-single.server.podAnnotations | object | `{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"}` | Annotations for Victoria Metrics pods |
| victoria-metrics-single.server.podAnnotations."prometheus.io/path" | string | `"/metrics"` | Path for Prometheus metrics endpoint |
| victoria-metrics-single.server.podAnnotations."prometheus.io/port" | string | `"8428"` | Port for Prometheus scraping |
| victoria-metrics-single.server.podAnnotations."prometheus.io/scrape" | string | `"true"` | Enable Prometheus scraping |
| victoria-metrics-single.server.podLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Additional labels for Victoria Metrics pods |
| victoria-metrics-single.server.podLabels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
| victoria-metrics-single.server.resources | object | `{}` | Resource requests and limits for Victoria Metrics server |
| victoria-metrics-single.server.retentionPeriod | int | `1` | Data retention period in months |
| victoria-metrics-single.server.service | object | `{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"labels":{"kots.io/app-slug":"settlemint-atk"}}` | Service configuration |
| victoria-metrics-single.server.service.annotations | object | `{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"}` | Annotations for Victoria Metrics service |
| victoria-metrics-single.server.service.annotations."prometheus.io/path" | string | `"/metrics"` | Path for Prometheus metrics endpoint |
| victoria-metrics-single.server.service.annotations."prometheus.io/port" | string | `"8428"` | Port for Prometheus scraping |
| victoria-metrics-single.server.service.annotations."prometheus.io/scrape" | string | `"true"` | Enable Prometheus scraping |
| victoria-metrics-single.server.service.labels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Labels for Victoria Metrics service |
| victoria-metrics-single.server.service.labels."kots.io/app-slug" | string | `"settlemint-atk"` | KOTS application slug identifier |
