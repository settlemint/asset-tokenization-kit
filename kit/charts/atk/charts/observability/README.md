# observability

![Version: 2.0.0-alpha.14](https://img.shields.io/badge/Version-2.0.0--alpha.14-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 2.0.0-alpha.14](https://img.shields.io/badge/AppVersion-2.0.0--alpha.14-informational?style=flat-square)

A Helm chart for the observability components

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| SettleMint | <support@settlemint.com> | <https://settlemint.com> |

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://grafana.github.io/helm-charts | alloy | 1.2.1 |
| https://grafana.github.io/helm-charts | grafana | 10.0.0 |
| https://grafana.github.io/helm-charts | loki | 6.41.1 |
| https://grafana.github.io/helm-charts | tempo | 1.23.3 |
| https://kubernetes-sigs.github.io/metrics-server/ | metrics-server | 3.13.0 |
| https://prometheus-community.github.io/helm-charts | kube-state-metrics | 6.3.0 |
| https://prometheus-community.github.io/helm-charts | prometheus-node-exporter | 4.48.0 |
| https://victoriametrics.github.io/helm-charts/ | victoria-metrics-single | 0.24.6 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| alloy | object | `{"alloy":{"configMap":{"content":"logging {\n  level  = \"info\"\n  format = \"logfmt\"\n}\n\ndiscovery.kubernetes \"kubernetes_nodes\" {\n  role = \"node\"\n}\n\ndiscovery.relabel \"kubernetes_nodes_cadvisor\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics/cadvisor\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n}\n\ndiscovery.relabel \"kubernetes_nodes\" {\n  targets = discovery.kubernetes.kubernetes_nodes.targets\n\n  rule {\n    target_label = \"__address__\"\n    replacement  = \"kubernetes.default.svc:443\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_node_name\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n    replacement   = \"/api/v1/nodes/$1/proxy/metrics\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n}\n\n\nprometheus.scrape \"kubernetes_nodes_cadvisor\" {\n  targets         = discovery.relabel.kubernetes_nodes_cadvisor.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes-cadvisor\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\nprometheus.scrape \"kubernetes_nodes\" {\n  targets         = discovery.relabel.kubernetes_nodes.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-nodes\"\n  scrape_interval = \"15s\"\n  scheme          = \"https\"\n\n  authorization {\n    type             = \"Bearer\"\n    credentials_file = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  }\n\n  tls_config {\n    ca_file              = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n    insecure_skip_verify = true\n  }\n}\n\n{{- if .Values.endpoints.internal.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics\" {\n    endpoint {\n        url = {{ .Values.endpoints.internal.prometheus.url | quote }}\n    }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.prometheus.enabled }}\nprometheus.remote_write \"btp_metrics_external\" {\n    endpoint {\n        url = {{ .Values.endpoints.external.prometheus.url | quote }}\n\n        {{- if and .Values.endpoints.external.prometheus.basicAuth.username .Values.endpoints.external.prometheus.basicAuth.password }}\n        basic_auth {\n          username = {{ .Values.endpoints.external.prometheus.basicAuth.username | quote }}\n          password = {{ .Values.endpoints.external.prometheus.basicAuth.password | quote }}\n        }\n        {{- end }}\n    }\n}\n{{- end }}\n\ndiscovery.kubernetes \"kubernetes_pods\" {\n  role = \"pod\"\n\n\n  selectors {\n    role  = \"pod\"\n    label = \"app.kubernetes.io/instance={{ .Release.Name }}\"\n  }\n\n}\n\ndiscovery.relabel \"kubernetes_pods\" {\n  targets = discovery.kubernetes.kubernetes_pods.targets\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_scheme\"]\n    regex         = \"(https?)\"\n    target_label  = \"__scheme__\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_annotation_prometheus_io_path\"]\n    regex         = \"(.+)\"\n    target_label  = \"__metrics_path__\"\n  }\n\n  rule {\n    source_labels = [\"__address__\", \"__meta_kubernetes_pod_annotation_prometheus_io_port\"]\n    regex         = \"(.+?)(?::\\\\d+)?;(\\\\d+)\"\n    target_label  = \"__address__\"\n    replacement   = \"$1:$2\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    replacement = \"__param_$1\"\n    action      = \"labelmap\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_pod_label_app_kubernetes_io_component\"]\n    target_label  = \"component\"\n  }\n\n  rule {\n    source_labels = [\"__meta_kubernetes_namespace\"]\n    target_label  = \"namespace\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_uid\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_id\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    regex       = \"__meta_kubernetes_pod_label_name\"\n    action      = \"labeldrop\"\n  }\n\n  rule {\n    replacement  = \"{{ .Values.clustername | default \"settlemint\" }}\"\n    target_label = \"cluster_name\"\n  }\n\n}\n\nprometheus.scrape \"kubernetes_pods\" {\n  targets         = discovery.relabel.kubernetes_pods.output\n  forward_to      = [{{if .Values.endpoints.internal.prometheus.enabled }}prometheus.remote_write.btp_metrics.receiver{{ end }}{{if .Values.endpoints.external.prometheus.enabled }}{{if .Values.endpoints.internal.prometheus.enabled }},{{ end }}prometheus.remote_write.btp_metrics_external.receiver{{ end }}]\n  job_name        = \"kubernetes-pods\"\n  honor_labels    = true\n  scrape_interval = \"15s\"\n}\n\nloki.source.kubernetes \"kubernetes_pods\" {\n  targets    = discovery.relabel.kubernetes_pods.output\n  forward_to = [{{ if .Values.endpoints.internal.loki.enabled }}loki.process.redact_tokens.receiver{{ end }}{{ if .Values.endpoints.external.loki.enabled }}{{ if .Values.endpoints.internal.loki.enabled }},{{ end }}loki.process.redact_tokens_external.receiver{{ end }}]\n}\n\n{{- if .Values.endpoints.internal.loki.enabled }}\nloki.process \"redact_tokens\" {\n  forward_to = [loki.secretfilter.secret_filter.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter\" {\n  forward_to  = [loki.write.btp_logs.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs\" {\n  endpoint {\n    url = {{ .Values.endpoints.internal.loki.url | quote }}\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.loki.enabled }}\nloki.process \"redact_tokens_external\" {\n  forward_to = [loki.secretfilter.secret_filter_external.receiver]\n  stage.replace {\n    expression = \"(?i)sm_\\\\S+_[0-9a-zA-Z]{3}([0-9a-zA-Z]+)\"\n    replace = \"****\"\n  }\n}\n\nloki.secretfilter \"secret_filter_external\" {\n  forward_to  = [loki.write.btp_logs_external.receiver]\n  redact_with = \"<ALLOY-REDACTED-SECRET:$SECRET_NAME:$SECRET_HASH>\"\n}\n\nloki.write \"btp_logs_external\" {\n  endpoint {\n    url = {{ .Values.endpoints.external.loki.url | quote }}\n\n    {{- if and .Values.endpoints.external.loki.basicAuth.username .Values.endpoints.external.loki.basicAuth.password }}\n    basic_auth {\n      username = {{ .Values.endpoints.external.loki.basicAuth.username | quote }}\n      password = {{ .Values.endpoints.external.loki.basicAuth.password | quote }}\n    }\n    {{- end }}\n  }\n}\n{{- end }}\n\notelcol.receiver.otlp \"atk_traces\" {\n  grpc {\n    endpoint = \"0.0.0.0:4317\"\n  }\n\n  http {\n    endpoint = \"0.0.0.0:4318\"\n  }\n\n  output {\n    traces  = [otelcol.processor.batch.atk_traces.input]\n  }\n}\n\notelcol.processor.batch \"atk_traces\" {\n  send_batch_size = 16384\n  send_batch_max_size = 16384\n  timeout = \"2s\"\n\n  output {\n    traces  = [{{ if .Values.endpoints.internal.otel.enabled }}otelcol.exporter.otlphttp.atk_traces_internal.input{{ end }}{{ if .Values.endpoints.external.otel.enabled }}{{ if .Values.endpoints.internal.otel.enabled }},{{ end }}otelcol.exporter.otlphttp.atk_traces_external.input{{ end }}]\n  }\n}\n\n{{- if .Values.endpoints.internal.otel.enabled }}\notelcol.exporter.otlphttp \"atk_traces_internal\" {\n  client {\n    endpoint = {{ .Values.endpoints.internal.otel.url | quote }}\n    tls {\n      insecure             = true\n      insecure_skip_verify = true\n    }\n  }\n}\n{{- end }}\n\n{{- if .Values.endpoints.external.otel.enabled }}\notelcol.exporter.otlp \"atk_traces_external\" {\n  client {\n    endpoint = {{ .Values.endpoints.external.otel.url | quote }}\n\n\n    {{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\n    auth     = otelcol.auth.basic.atk_traces_external.handler\n    {{- end }}\n  }\n}\n\n{{- if and .Values.endpoints.external.otel.basicAuth.username .Values.endpoints.external.otel.basicAuth.password }}\notelcol.auth.basic \"atk_traces_external\" {\n  username = {{ .Values.endpoints.external.otel.basicAuth.username | quote }}\n  password = {{ .Values.endpoints.external.otel.basicAuth.password | quote }}\n}\n{{- end }}\n\n{{- end }}\n"},"enableReporting":false,"extraPorts":[{"name":"otel-grpc","port":4317,"protocol":"TCP","targetPort":4317},{"name":"otel-http","port":4318,"protocol":"TCP","targetPort":4318}],"resources":{},"stabilityLevel":"experimental"},"clustername":"","configReloader":{"image":{"registry":"ghcr.io"}},"controller":{"type":"deployment"},"crds":{"create":false},"enabled":true,"endpoints":{"external":{"loki":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"otel":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""},"prometheus":{"basicAuth":{"password":null,"username":null},"enabled":false,"url":""}},"internal":{"loki":{"enabled":true,"url":"http://logs:3100/loki/api/v1/push"},"otel":{"enabled":true,"url":"http://tempo:4318"},"prometheus":{"enabled":true,"url":"http://metrics:8428/api/v1/write"}}},"fullnameOverride":"alloy","global":{"image":{"pullSecrets":[]}},"image":{"registry":"docker.io"}}` | Alloy configuration |
| global.labels."kots.io/app-slug" | string | `"settlemint-atk"` |  |
| grafana | object | `{"adminPassword":"atk","adminUser":"settlemint","datasources":{"datasources.yaml":{"apiVersion":1,"datasources":[{"access":"proxy","isDefault":true,"name":"Prometheus","type":"prometheus","uid":"prometheus","url":"http://metrics:8428"},{"access":"proxy","isDefault":false,"jsonData":{"derivedFields":[{"datasourceUid":"tempo","matcherRegex":"^.*?traceI[d|D]=(\\w+).*$","name":"traceId","url":"$${__value.raw}"}],"maxLines":1000,"timeout":60},"name":"Loki","type":"loki","uid":"loki","url":"http://logs:3100"},{"access":"proxy","database":"thegraph","isDefault":false,"jsonData":{"postgresVersion":15,"sslmode":"disable","timescaledb":false},"name":"PostgreSQL","secureJsonData":{"password":"atk"},"type":"postgres","uid":"postgres","url":"postgresql:5432","user":"thegraph"}]}},"enabled":true,"fullnameOverride":"grafana","global":{"imagePullSecrets":[],"imageRegistry":"docker.io"},"ingress":{"enabled":true,"hosts":["grafana.k8s.orb.local"],"ingressClassName":"atk-nginx"},"initChownData":{"enabled":false},"persistence":{"enabled":false,"size":"1Gi"},"plugins":["https://storage.googleapis.com/integration-artifacts/grafana-lokiexplore-app/grafana-lokiexplore-app-latest.zip;grafana-lokiexplore-app"],"podLabels":{"app.kubernetes.io/managed-by":"helm","kots.io/app-slug":"settlemint-atk"},"sidecar":{"alerts":{"enabled":false,"label":"grafana_alert","labelValue":"1","searchNamespace":"ALL","slackChannel":"","slackUrl":"","slackUsername":""},"dashboards":{"enabled":true,"folderAnnotation":"grafana_folder","provider":{"allowUiUpdates":true,"foldersFromFilesStructure":true},"searchNamespace":"ALL"},"datasources":{"enabled":true,"initDatasources":true},"plugins":{"enabled":true}}}` | Grafana configuration |
| kube-state-metrics | object | `{"customLabels":{"kots.io/app-slug":"settlemint-atk"},"enabled":true,"fullnameOverride":"kube-state-metrics","image":{"registry":"registry.k8s.io"},"imagePullSecrets":[],"metricLabelsAllowlist":["pods=[*]","ingresses=[*]"],"podAnnotations":{"prometheus.io/scrape":"true"}}` | Kube State Metrics configuration |
| kube-state-metrics.customLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Custom labels to add to all resources |
| kube-state-metrics.enabled | bool | `true` | Enable kube-state-metrics deployment |
| kube-state-metrics.fullnameOverride | string | `"kube-state-metrics"` | String to fully override common.names.fullname (string) |
| kube-state-metrics.image | object | `{"registry":"registry.k8s.io"}` | Kube state metrics image configuration |
| kube-state-metrics.image.registry | string | `"registry.k8s.io"` | Kube state metrics image registry |
| kube-state-metrics.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| kube-state-metrics.metricLabelsAllowlist | list | `["pods=[*]","ingresses=[*]"]` | Allow list for metric labels |
| kube-state-metrics.podAnnotations | object | `{"prometheus.io/scrape":"true"}` | Annotations for kube-state-metrics pods |
| loki | object | `{"backend":{"replicas":0},"bloomCompactor":{"replicas":0},"bloomGateway":{"replicas":0},"chunksCache":{"allocatedMemory":1024,"enabled":false,"writebackSizeLimit":"100MB"},"compactor":{"replicas":0},"deploymentMode":"SingleBinary","distributor":{"replicas":0},"enabled":true,"fullnameOverride":"logs","gateway":{"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":null}},"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Logs","nginx.ingress.kubernetes.io/auth-secret":"observability-logs","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"host":"logs.settlemint.local","paths":[{"path":"/","pathType":"Prefix"}]}],"ingressClassName":"atk-nginx"}},"global":{"image":{"registry":"docker.io"}},"imagePullSecrets":[],"indexGateway":{"replicas":0},"ingester":{"replicas":0},"loki":{"auth_enabled":false,"commonConfig":{"replication_factor":1},"compactor":{"compaction_interval":"60m","delete_request_store":"filesystem","retention_delete_delay":"2h","retention_delete_worker_count":150,"retention_enabled":true,"working_directory":"/var/loki/retention"},"ingester":{"chunk_encoding":"snappy"},"limits_config":{"allow_structured_metadata":true,"cardinality_limit":200000,"ingestion_burst_size_mb":1000,"ingestion_rate_mb":1000,"max_entries_limit_per_query":1000000,"max_global_streams_per_user":10000,"max_label_name_length":10240,"max_label_names_per_series":300,"max_label_value_length":20480,"max_line_size":100982429,"max_query_parallelism":2,"max_query_series":10000,"per_stream_rate_limit":"512M","per_stream_rate_limit_burst":"1024M","reject_old_samples":true,"reject_old_samples_max_age":"24h","retention_period":"168h","split_queries_by_interval":"15m","volume_enabled":true},"pattern_receiver":{"enabled":true},"querier":{"max_concurrent":2},"schemaConfig":{"configs":[{"from":"2024-04-01","index":{"period":"24h","prefix":"loki_index_"},"object_store":"filesystem","schema":"v13","store":"tsdb"}]},"server":{"grpc_server_max_recv_msg_size":100982429,"grpc_server_max_send_msg_size":100982429},"storage":{"type":"filesystem"},"tracing":{"enabled":true}},"lokiCanary":{"enabled":false},"memcached":{"image":{"repository":"docker.io/library/memcached"}},"memcachedExporter":{"image":{"repository":"docker.io/prom/memcached-exporter"}},"minio":{"enabled":false},"querier":{"replicas":0},"queryFrontend":{"replicas":0},"queryScheduler":{"replicas":0},"read":{"replicas":0},"resultsCache":{"enabled":false},"sidecar":{"image":{"repository":"docker.io/kiwigrid/k8s-sidecar"}},"singleBinary":{"persistence":{"size":"10Gi"},"replicas":1,"resources":{}},"test":{"enabled":false},"write":{"replicas":0}}` | Loki configuration |
| loki.sidecar.image.repository | string | `"docker.io/kiwigrid/k8s-sidecar"` | The Docker registry and image for the k8s sidecar |
| metrics-server | object | `{"enabled":false,"fullnameOverride":"metrics-server","image":{"repository":"registry.k8s.io/metrics-server/metrics-server"},"imagePullSecrets":[],"podLabels":{"kots.io/app-slug":"settlemint-atk"},"server":{"persistentVolume":{"enabled":false}},"service":{"labels":{"kots.io/app-slug":"settlemint-atk"}}}` | Kubernetes Metrics Server configuration |
| metrics-server.enabled | bool | `false` | Enable metrics server deployment |
| metrics-server.fullnameOverride | string | `"metrics-server"` | String to fully override common.names.fullname (string) |
| metrics-server.image | object | `{"repository":"registry.k8s.io/metrics-server/metrics-server"}` | Metrics server image configuration |
| metrics-server.image.repository | string | `"registry.k8s.io/metrics-server/metrics-server"` | Metrics server image repository |
| metrics-server.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| metrics-server.podLabels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Additional labels for metrics server pods |
| metrics-server.server | object | `{"persistentVolume":{"enabled":false}}` | Server configuration |
| metrics-server.server.persistentVolume | object | `{"enabled":false}` | Persistent volume configuration |
| metrics-server.server.persistentVolume.enabled | bool | `false` | Enable persistent volume for metrics server |
| metrics-server.service | object | `{"labels":{"kots.io/app-slug":"settlemint-atk"}}` | Service configuration |
| metrics-server.service.labels | object | `{"kots.io/app-slug":"settlemint-atk"}` | Additional labels for metrics server service |
| prometheus-node-exporter | object | `{"enabled":true,"fullnameOverride":"node-exporter","global":{"imageRegistry":"quay.io"},"image":{"registry":"quay.io"},"imagePullSecrets":[],"kubeRBACProxy":{"image":{"registry":"quay.io"}},"nameOverride":"node-exporter","podAnnotations":{"cluster-autoscaler.kubernetes.io/safe-to-evict":"true","prometheus.io/port":"9100","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"}}` | Prometheus Node Exporter configuration |
| tempo | object | `{"enabled":true,"fullnameOverride":"tempo","persistence":{"enabled":true,"size":"10Gi"},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"3100","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"securityContext":{"fsGroup":65532,"runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532},"tempo":{"metricsGenerator":{"enabled":true,"remoteWriteUrl":"http://o11y-metrics:8428/api/v1/write"},"overrides":{"defaults":{"global":{"max_bytes_per_trace":20000000},"ingestion":{"max_traces_per_user":100000,"rate_limit_bytes":30000000}}},"pullSecrets":[],"reportingEnabled":false,"repository":"docker.io/grafana/tempo","retention":"168h"},"tempoQuery":{"ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":["traces.k8s.orb.local"],"ingressClassName":"atk-nginx","pathType":"Prefix"},"pullSecrets":[],"repository":"docker.io/grafana/tempo-query"}}` | Tempo configuration |
| victoria-metrics-single | object | `{"enabled":true,"global":{"image":{"registry":"docker.io"},"imagePullSecrets":[]},"server":{"extraArgs":{"search.maxQueryLen":163840},"fullnameOverride":"metrics","ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"},"persistentVolume":{"size":"10Gi","storageClass":""},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"resources":{},"retentionPeriod":1,"service":{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"labels":{"kots.io/app-slug":"settlemint-atk"}}}}` | Victoria Metrics Single configuration |
| victoria-metrics-single.enabled | bool | `true` | Enable Victoria Metrics Single deployment |
| victoria-metrics-single.global | object | `{"image":{"registry":"docker.io"},"imagePullSecrets":[]}` | Global configuration |
| victoria-metrics-single.global.image | object | `{"registry":"docker.io"}` | Global image configuration |
| victoria-metrics-single.global.image.registry | string | `"docker.io"` | Global image registry |
| victoria-metrics-single.global.imagePullSecrets | list | `[]` | Global Docker registry secret names as an array (list) |
| victoria-metrics-single.server | object | `{"extraArgs":{"search.maxQueryLen":163840},"fullnameOverride":"metrics","ingress":{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"},"persistentVolume":{"size":"10Gi","storageClass":""},"podAnnotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"podLabels":{"kots.io/app-slug":"settlemint-atk"},"resources":{},"retentionPeriod":1,"service":{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8428","prometheus.io/scrape":"true"},"labels":{"kots.io/app-slug":"settlemint-atk"}}}` | Victoria Metrics server configuration |
| victoria-metrics-single.server.extraArgs | object | `{"search.maxQueryLen":163840}` | Extra arguments for Victoria Metrics server |
| victoria-metrics-single.server.extraArgs."search.maxQueryLen" | int | `163840` | Maximum query length |
| victoria-metrics-single.server.fullnameOverride | string | `"metrics"` | String to fully override common.names.fullname (string) |
| victoria-metrics-single.server.ingress | object | `{"annotations":{"nginx.ingress.kubernetes.io/auth-realm":"Authentication Required - Metrics","nginx.ingress.kubernetes.io/auth-secret":"observability-metrics","nginx.ingress.kubernetes.io/auth-type":"basic","nginx.ingress.kubernetes.io/client-body-buffer-size":"500m","nginx.ingress.kubernetes.io/proxy-body-size":"500m","nginx.ingress.kubernetes.io/proxy-read-timeout":"3600","nginx.ingress.kubernetes.io/proxy-send-timeout":"3600"},"enabled":false,"hosts":[{"name":"metrics.settlemint.local","path":"/","port":"http"}],"ingressClassName":"atk-nginx","pathType":"Prefix"}` | Ingress configuration for Victoria Metrics |
| victoria-metrics-single.server.persistentVolume | object | `{"size":"10Gi","storageClass":""}` | Persistent volume configuration |
| victoria-metrics-single.server.persistentVolume.size | string | `"10Gi"` | Size of the persistent volume |
| victoria-metrics-single.server.persistentVolume.storageClass | string | `""` | Storage class for persistent volume (uses default if empty) |
| victoria-metrics-single.server.resources | object | `{}` | Resource requests and limits for Victoria Metrics server |
| victoria-metrics-single.server.retentionPeriod | int | `1` | Data retention period in months |
