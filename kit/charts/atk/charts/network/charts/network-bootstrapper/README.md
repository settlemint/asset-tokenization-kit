# network-bootstrapper

![Version: 2.0.0-beta.4](https://img.shields.io/badge/Version-2.0.0--beta.4-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 2.0.0-beta.4](https://img.shields.io/badge/AppVersion-2.0.0--beta.4-informational?style=flat-square)

A Helm chart for Kubernetes

## Configuration

The following table lists the configurable parameters of this chart and their default values.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
|affinity|object|-|Affinity and anti-affinity rules influencing pod placement.|
|artifacts|object|-|Artifact sourcing controls for bootstrap data used by the nodes chart.|
|artifacts.external|object|-|External artifact values used when `source` equals `external`.|
|artifacts.external.faucet|object|-|Faucet account credentials stored in ConfigMaps and Secrets when `source` equals `external`.|
|artifacts.external.faucet.address|string|`""`|Faucet account address stored in the `besu-faucet-address` ConfigMap when `source` equals `external`.|
|artifacts.external.faucet.privateKey|string|`""`|Faucet private key stored in the `besu-faucet-private-key` Secret when `source` equals `external`.|
|artifacts.external.faucet.publicKey|string|`""`|Faucet account public key stored in the `besu-faucet-pubkey` ConfigMap when `source` equals `external`.|
|artifacts.external.genesis|object|-|Besu genesis document rendered into the `besu-genesis` ConfigMap when `source` equals `external`.|
|artifacts.external.staticNodes|list|-|Collection of enode URIs persisted to the `besu-static-nodes` ConfigMap when `source` equals `external`.|
|artifacts.external.validators|list|-|Validator node definitions providing the data expected by the nodes chart. Each entry must include `address`, `publicKey`, `privateKey`, and `enode`.|
|artifacts.source|string|`"generated"`|Determines how Besu network artifacts are populated. Use `generated` to render the bootstrap Job on fresh installs or `external` to supply values manually.|
|extraInitContainers|list|-|Additional init containers appended verbatim to the job pod spec.|
|fullnameOverride|string|`"bootstrapper"`|Override for the fully qualified resource name generated by helpers.|
|global|object|-|Global values inherited from the parent chart.|
|global.artifacts|object|-|Container artifacts configuration for contract ABIs and genesis files.|
|global.artifacts.image|object|-|Image containing contract ABIs and genesis files.|
|global.artifacts.image.pullPolicy|string|`"IfNotPresent"`|Image pull policy for the artifacts container.|
|global.artifacts.image.registry|string|`"ghcr.io"`|OCI registry hosting the artifacts image.|
|global.artifacts.image.repository|string|`"settlemint/asset-tokenization-kit-artifacts"`|Repository path for the artifacts container image.|
|global.artifacts.image.tag|string|`""`|Image tag for the artifacts container; leave empty to use chart default.|
|global.chainId|int|`nil`|Chain ID applied when `settings.chainId` is unset.|
|global.labels|object|-|Common labels applied to all resources in the release.|
|global.labels."kots.io/app-slug"|string|`"settlemint-atk"`|KOTS application slug for Replicated platform integration.|
|image|object|-|Container image configuration for the network bootstrapper.|
|image.pullPolicy|string|`"IfNotPresent"`|Image pull policy controlling when Kubernetes fetches updated image layers.|
|image.repository|string|`"ghcr.io/settlemint/network-bootstrapper"`|OCI registry path hosting the network bootstrapper image.|
|image.tag|string|`"1.2.3"`|Image tag override; leave empty to inherit the chart appVersion.|
|imagePullSecrets|list|-|Image pull secrets enabling access to private registries.|
|initContainer|object|-|Init container configuration shared across the bootstrapper job.|
|initContainer.tcpCheck|object|-|TCP health check init container that waits for dependencies to be ready.|
|initContainer.tcpCheck.dependencies|list|-|TCP dependencies expressed as name/endpoint pairs (host:port strings).|
|initContainer.tcpCheck.enabled|bool|`false`|Enable a tcp-check init container before the bootstrapper job starts.|
|initContainer.tcpCheck.image|object|-|Container image configuration for the tcp-check init container.|
|initContainer.tcpCheck.image.pullPolicy|string|`"IfNotPresent"`|Image pull policy for the tcp-check init container.|
|initContainer.tcpCheck.image.repository|string|`"ghcr.io/settlemint/btp-waitforit"`|OCI image hosting the tcp-check utility.|
|initContainer.tcpCheck.image.tag|string|`"v7.7.14"`|Image tag for the tcp-check utility.|
|initContainer.tcpCheck.resources|object|-|CPU and memory resource constraints for the tcp-check init container.|
|initContainer.tcpCheck.resources.limits|object|-|Maximum resource limits for the tcp-check init container.|
|initContainer.tcpCheck.resources.limits.cpu|string|`"300m"`|Maximum CPU allocation for the tcp-check init container.|
|initContainer.tcpCheck.resources.limits.memory|string|`"64Mi"`|Maximum memory allocation for the tcp-check init container.|
|initContainer.tcpCheck.resources.requests|object|-|Minimum resource requests for the tcp-check init container.|
|initContainer.tcpCheck.resources.requests.cpu|string|`"10m"`|Minimum CPU request for the tcp-check init container.|
|initContainer.tcpCheck.resources.requests.memory|string|`"32Mi"`|Minimum memory request for the tcp-check init container.|
|initContainer.tcpCheck.timeout|int|`120`|Timeout in seconds applied to each dependency probe.|
|nameOverride|string|`""`|Override for the short release name used by name templates.|
|nodeSelector|object|-|Node selector constraints for scheduling the bootstrapper pod.|
|podAnnotations|object|-|Additional annotations merged onto the bootstrapper pod template.|
|podLabels|object|-|Extra labels merged onto the bootstrapper pod template.|
|podSecurityContext|object|-|Pod-level security context applied to all containers in the pod.|
|rbac|object|-|RBAC settings that provision Role and RoleBinding for Kubernetes output.|
|rbac.create|bool|`true`|Render Role and RoleBinding resources tied to the ServiceAccount.|
|resources|object|-|CPU and memory requests or limits for the bootstrapper container.|
|securityContext|object|-|Container security context applied to the bootstrapper container.|
|serviceAccount|object|-|ServiceAccount configuration associated with the bootstrapper job.|
|serviceAccount.annotations|object|-|Metadata annotations applied to the ServiceAccount.|
|serviceAccount.automount|bool|`true`|Mount the ServiceAccount token into the bootstrapper pod.|
|serviceAccount.create|bool|`true`|Create a ServiceAccount resource for the release automatically.|
|serviceAccount.name|string|`""`|Existing ServiceAccount name to reuse instead of creating one.|
|settings|object|-|Settings passed to the network-bootstrapper CLI executed by the job.|
|settings.allocations|string|`nil`|Path to a JSON allocations file providing pre-funded accounts.|
|settings.chainId|int|`nil`|Explicit chain ID to encode into the genesis file. Leave unset to inherit from global.chainId.|
|settings.clusterDomain|string|`"svc.cluster.local"`|Kubernetes DNS suffix appended to generated static node hostnames when unset by the CLI.|
|settings.consensus|string|`nil`|Consensus engine to configure (QBFT or IBFTv2).|
|settings.contractSizeLimit|int|`nil`|Maximum smart-contract bytecode size accepted by the EVM.|
|settings.defaultStaticNodeDiscoveryPort|int|`30303`|Default UDP discovery port used in generated enode URIs when no override is provided.|
|settings.defaultStaticNodePort|int|`30303`|Default TCP P2P port used in generated enode URIs when no override is provided.|
|settings.evmStackSize|int|`nil`|Maximum EVM stack size permitted for contract execution.|
|settings.faucetArtifactPrefix|string|`nil`|Prefix used for faucet ConfigMaps and Secrets.|
|settings.gasLimit|int|`nil`|Genesis block gas limit expressed as a decimal number.|
|settings.gasPrice|int|`nil`|Base gas price in wei applied across the network.|
|settings.genesisConfigMapName|string|`nil`|ConfigMap name storing the generated genesis.json payload.|
|settings.outputType|string|`"kubernetes"`|Output target for generated artefacts: screen, file, or kubernetes.|
|settings.secondsPerBlock|int|`nil`|Block interval in seconds for the genesis configuration.|
|settings.staticNodeDiscoveryPort|int|`nil`|UDP discovery port embedded in static node enode URIs.|
|settings.staticNodeDomain|string|`nil`|DNS suffix appended to generated static node hostnames.|
|settings.staticNodeNamespace|string|`nil`|Namespace component inserted between service name and domain in static node hostnames.|
|settings.staticNodePodPrefix|string|`nil`|StatefulSet prefix applied to validator pod hostnames.|
|settings.staticNodePort|int|`nil`|TCP P2P port embedded in static node enode URIs.|
|settings.staticNodeServiceName|string|`nil`|Headless Service name used when constructing static node hostnames.|
|settings.staticNodesConfigMapName|string|`nil`|ConfigMap name storing the generated static-nodes.json payload.|
|settings.validators|int|`nil`|Number of validator identities to generate (default 4).|
|subgraph|object|-|Subgraph handling controls for fallback scenarios.|
|subgraph.fallbackHash|string|`"QmRU9F9d7kuDVVzqVF5ig1SibWSEWLYvurR8yz7dyrEUnx"`|IPFS hash used when the artifacts image does not contain subgraph metadata.|
|tolerations|list|-|Tolerations allowing the bootstrapper pod onto tainted nodes.|
|volumeMounts|list|-|Extra volume mounts applied to the bootstrapper container.|
|volumes|list|-|Additional volumes attached to the bootstrapper pod.|

## Resource Summary

| Component | Replicas | Request CPU | Limit CPU | Request Memory | Limit Memory | Storage |
|-----------|----------|-------------|-----------|----------------|--------------|---------|
| initContainer.tcpCheck | 1 | 10m | 300m | 32Mi | 64Mi | - |
| **Totals** | - | 0.01 cores (10m) | 0.30 cores (300m) | 32Mi (0.03Gi) | 64Mi (0.06Gi) | - |

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| SettleMint | <support@settlemint.com> | <https://settlemint.com> |

